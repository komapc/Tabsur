{"version":3,"names":["_react","_interopRequireWildcard","require","_reactRouterDom","_NameStep","_interopRequireDefault","_LocationStep","_DescriptionStep","_ImageStep","_propTypes","_Navigator","_reactStepWizard","_reactRedux","_mealActions","_BackBarMui","_Box","_styles","_AppBar","_Toolbar","_jsxRuntime","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","CreateMealWizard","auth","addMeal","theme","createTheme","palette","secondary","main","primary","formatedDate","Date","now","history","useHistory","isAuthenticated","push","pathname","state","updateState","useState","form","name","user","description","date","time","address","location","lng","lat","host_id","id","guest_count","image_id","type","visibility","transitions","uploadingState","setInstance","SW","onStepChange","stats","submit","preventDefault","summedDate","setHours","getHours","setMinutes","getMinutes","formattedDate","getTime","newMeal","console","log","JSON","stringify","hash","update","value","setUploadingState","newUploadingState","jsxs","ThemeProvider","children","jsx","position","p","instance","mapStateToProps","errors","propTypes","PropTypes","func","isRequired","object","mapDispatchToProps","dispatch","_default","exports","connect"],"sources":["CreateMealWizard.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useHistory } from \"react-router-dom\";\nimport NameStep from './NameStep';\nimport LocationStep from './LocationStep';\nimport DescriptionStep from './DescriptionStep';\nimport ImageStep from './ImageStep';\n\nimport PropTypes from \"prop-types\";\nimport Navigator from \"./Navigator\";\nimport StepWizard from 'react-step-wizard';\nimport { connect } from \"react-redux\";\nimport { addMeal } from \"../../../actions/mealActions\";\nimport BackBarMui from \"../../layout/BackBarMui\";\n\nimport Box from '@mui/material/Box';\nimport { createTheme, ThemeProvider } from '@mui/material/styles';\nimport AppBar from '@mui/material/AppBar';\nimport Toolbar from '@mui/material/Toolbar';\n\n\nconst CreateMealWizard = ({ auth, addMeal }) => {\n\n  const theme = createTheme({\n    palette: {\n      secondary: {\n        main: '#ffff00',\n      },\n      primary: {\n        main: '#010101',\n      },\n    },\n  });\n\n  const formatedDate = new Date(Date.now() + 86400000);\n  const history = useHistory();\n\n  if (!auth.isAuthenticated) {\n    history.push({ pathname: '/login' });\n  }\n  const [state, updateState] = useState({\n    form: {\n      name: `${auth.user.name}'s meal`,\n      description: \"\",\n      date: formatedDate,\n      time: formatedDate,\n      address: \"Default Address\",  // Set default address\n      location: { lng: 34.808, lat: 32.09 },  // Set default location (Tel Aviv)\n      host_id: auth.user.id,\n      guest_count: 3,\n      image_id: -1,\n      type: 1,        // Add default meal type\n      visibility: 1,   // Add default visibility (1 = public)\n    },\n    transitions: {\n    },\n    history: history,\n    uploadingState: false\n  });\n\n  const setInstance = SW => updateState({\n    ...state,\n    SW,\n  });\n\n  const onStepChange = (stats) => {\n    updateState({\n      ...state,\n      stats\n    });\n  };\n\n  const submit = (e) => {\n    e.preventDefault();\n    let summedDate = new Date(state.form.date);\n    const time = new Date(state.form.time);\n    summedDate.setHours(time.getHours());\n    summedDate.setMinutes(time.getMinutes());\n    const formattedDate = new Date(summedDate).getTime();\n    const newMeal = {\n      name: state.form.name,\n      description: state.form.description,\n      date: formattedDate,\n      address: state.form.address,\n      location: state.form.location,\n      host_id: auth.user.id,\n      guest_count: state.form.guest_count,\n      image_id: state.form.image_id ? state.form.image_id : -2,\n      type: state.form.type,           // Add meal type\n      visibility: state.form.visibility // Add visibility\n    };\n    console.log(JSON.stringify(newMeal));\n    return addMeal(newMeal, () => {\n      history.push({ pathname: '/', hash: '#2' });\n    });\n  }\n  const update = (e) => {\n    const { form } = state;\n\n    form[e.id] = e.value;\n    updateState({\n      ...state,\n      form,\n    });\n  };\n\n  const setUploadingState = (newUploadingState) => {\n    updateState({ ...state, uploadingState: newUploadingState });\n  }\n  const { SW } = state;\n\n  return (\n    <ThemeProvider theme={theme}>\n\n      {/* <h4 className=\"wizard-caption\">Create Meal</h4> */}\n      <AppBar position=\"sticky\">\n        <Toolbar> CREATE MEAL\n            {/* CHAT ({this.state.notificationsCount}) */}\n        </Toolbar>\n      </AppBar>\n      <BackBarMui history={history} />\n      <Box p={2}>\n        <StepWizard\n          onStepChange={onStepChange}\n          transitions={state.transitions}\n          instance={setInstance}>\n          <NameStep update={update} form={state.form} />\n          <LocationStep update={update} form={state.form} />\n          <DescriptionStep update={update} form={state.form} />\n          <ImageStep update={update} form={state.form} auth={auth} setUploadingState={setUploadingState} />\n        </StepWizard>\n      </Box>\n\n      {SW && <Navigator SW={SW} submit={submit} uploadingState={state.uploadingState} />}\n    </ThemeProvider>\n  );\n};\n\nconst mapStateToProps = state => ({\n  auth: state.auth,\n  errors: state.errors\n});\n\nCreateMealWizard.propTypes = {\n  addMeal: PropTypes.func.isRequired,\n  auth: PropTypes.object.isRequired\n};\n\nconst mapDispatchToProps = (dispatch) => ({\n  addMeal: (form, history) => addMeal(form, history)(dispatch)\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CreateMealWizard);"],"mappings":";;;;;;;AAAA,IAAAA,MAAA,GAAAC,uBAAA,CAAAC,OAAA;AACA,IAAAC,eAAA,GAAAD,OAAA;AACA,IAAAE,SAAA,GAAAC,sBAAA,CAAAH,OAAA;AACA,IAAAI,aAAA,GAAAD,sBAAA,CAAAH,OAAA;AACA,IAAAK,gBAAA,GAAAF,sBAAA,CAAAH,OAAA;AACA,IAAAM,UAAA,GAAAH,sBAAA,CAAAH,OAAA;AAEA,IAAAO,UAAA,GAAAJ,sBAAA,CAAAH,OAAA;AACA,IAAAQ,UAAA,GAAAL,sBAAA,CAAAH,OAAA;AACA,IAAAS,gBAAA,GAAAN,sBAAA,CAAAH,OAAA;AACA,IAAAU,WAAA,GAAAV,OAAA;AACA,IAAAW,YAAA,GAAAX,OAAA;AACA,IAAAY,WAAA,GAAAT,sBAAA,CAAAH,OAAA;AAEA,IAAAa,IAAA,GAAAV,sBAAA,CAAAH,OAAA;AACA,IAAAc,OAAA,GAAAd,OAAA;AACA,IAAAe,OAAA,GAAAZ,sBAAA,CAAAH,OAAA;AACA,IAAAgB,QAAA,GAAAb,sBAAA,CAAAH,OAAA;AAA4C,IAAAiB,WAAA,GAAAjB,OAAA;AAAA,SAAAD,wBAAAmB,CAAA,EAAAC,CAAA,6BAAAC,OAAA,MAAAC,CAAA,OAAAD,OAAA,IAAAE,CAAA,OAAAF,OAAA,YAAArB,uBAAA,YAAAA,CAAAmB,CAAA,EAAAC,CAAA,SAAAA,CAAA,IAAAD,CAAA,IAAAA,CAAA,CAAAK,UAAA,SAAAL,CAAA,MAAAM,CAAA,EAAAC,CAAA,EAAAC,CAAA,KAAAC,SAAA,QAAAC,OAAA,EAAAV,CAAA,iBAAAA,CAAA,uBAAAA,CAAA,yBAAAA,CAAA,SAAAQ,CAAA,MAAAF,CAAA,GAAAL,CAAA,GAAAG,CAAA,GAAAD,CAAA,QAAAG,CAAA,CAAAK,GAAA,CAAAX,CAAA,UAAAM,CAAA,CAAAM,GAAA,CAAAZ,CAAA,GAAAM,CAAA,CAAAO,GAAA,CAAAb,CAAA,EAAAQ,CAAA,gBAAAP,CAAA,IAAAD,CAAA,gBAAAC,CAAA,OAAAa,cAAA,CAAAC,IAAA,CAAAf,CAAA,EAAAC,CAAA,OAAAM,CAAA,IAAAD,CAAA,GAAAU,MAAA,CAAAC,cAAA,KAAAD,MAAA,CAAAE,wBAAA,CAAAlB,CAAA,EAAAC,CAAA,OAAAM,CAAA,CAAAK,GAAA,IAAAL,CAAA,CAAAM,GAAA,IAAAP,CAAA,CAAAE,CAAA,EAAAP,CAAA,EAAAM,CAAA,IAAAC,CAAA,CAAAP,CAAA,IAAAD,CAAA,CAAAC,CAAA,WAAAO,CAAA,KAAAR,CAAA,EAAAC,CAAA;AAG5C,MAAMkB,gBAAgB,GAAGA,CAAC;EAAEC,IAAI;EAAEC;AAAQ,CAAC,KAAK;EAE9C,MAAMC,KAAK,GAAG,IAAAC,mBAAW,EAAC;IACxBC,OAAO,EAAE;MACPC,SAAS,EAAE;QACTC,IAAI,EAAE;MACR,CAAC;MACDC,OAAO,EAAE;QACPD,IAAI,EAAE;MACR;IACF;EACF,CAAC,CAAC;EAEF,MAAME,YAAY,GAAG,IAAIC,IAAI,CAACA,IAAI,CAACC,GAAG,CAAC,CAAC,GAAG,QAAQ,CAAC;EACpD,MAAMC,OAAO,GAAG,IAAAC,0BAAU,EAAC,CAAC;EAE5B,IAAI,CAACZ,IAAI,CAACa,eAAe,EAAE;IACzBF,OAAO,CAACG,IAAI,CAAC;MAAEC,QAAQ,EAAE;IAAS,CAAC,CAAC;EACtC;EACA,MAAM,CAACC,KAAK,EAAEC,WAAW,CAAC,GAAG,IAAAC,eAAQ,EAAC;IACpCC,IAAI,EAAE;MACJC,IAAI,EAAE,GAAGpB,IAAI,CAACqB,IAAI,CAACD,IAAI,SAAS;MAChCE,WAAW,EAAE,EAAE;MACfC,IAAI,EAAEf,YAAY;MAClBgB,IAAI,EAAEhB,YAAY;MAClBiB,OAAO,EAAE,iBAAiB;MAAG;MAC7BC,QAAQ,EAAE;QAAEC,GAAG,EAAE,MAAM;QAAEC,GAAG,EAAE;MAAM,CAAC;MAAG;MACxCC,OAAO,EAAE7B,IAAI,CAACqB,IAAI,CAACS,EAAE;MACrBC,WAAW,EAAE,CAAC;MACdC,QAAQ,EAAE,CAAC,CAAC;MACZC,IAAI,EAAE,CAAC;MAAS;MAChBC,UAAU,EAAE,CAAC,CAAI;IACnB,CAAC;IACDC,WAAW,EAAE,CACb,CAAC;IACDxB,OAAO,EAAEA,OAAO;IAChByB,cAAc,EAAE;EAClB,CAAC,CAAC;EAEF,MAAMC,WAAW,GAAGC,EAAE,IAAIrB,WAAW,CAAC;IACpC,GAAGD,KAAK;IACRsB;EACF,CAAC,CAAC;EAEF,MAAMC,YAAY,GAAIC,KAAK,IAAK;IAC9BvB,WAAW,CAAC;MACV,GAAGD,KAAK;MACRwB;IACF,CAAC,CAAC;EACJ,CAAC;EAED,MAAMC,MAAM,GAAI7D,CAAC,IAAK;IACpBA,CAAC,CAAC8D,cAAc,CAAC,CAAC;IAClB,IAAIC,UAAU,GAAG,IAAIlC,IAAI,CAACO,KAAK,CAACG,IAAI,CAACI,IAAI,CAAC;IAC1C,MAAMC,IAAI,GAAG,IAAIf,IAAI,CAACO,KAAK,CAACG,IAAI,CAACK,IAAI,CAAC;IACtCmB,UAAU,CAACC,QAAQ,CAACpB,IAAI,CAACqB,QAAQ,CAAC,CAAC,CAAC;IACpCF,UAAU,CAACG,UAAU,CAACtB,IAAI,CAACuB,UAAU,CAAC,CAAC,CAAC;IACxC,MAAMC,aAAa,GAAG,IAAIvC,IAAI,CAACkC,UAAU,CAAC,CAACM,OAAO,CAAC,CAAC;IACpD,MAAMC,OAAO,GAAG;MACd9B,IAAI,EAAEJ,KAAK,CAACG,IAAI,CAACC,IAAI;MACrBE,WAAW,EAAEN,KAAK,CAACG,IAAI,CAACG,WAAW;MACnCC,IAAI,EAAEyB,aAAa;MACnBvB,OAAO,EAAET,KAAK,CAACG,IAAI,CAACM,OAAO;MAC3BC,QAAQ,EAAEV,KAAK,CAACG,IAAI,CAACO,QAAQ;MAC7BG,OAAO,EAAE7B,IAAI,CAACqB,IAAI,CAACS,EAAE;MACrBC,WAAW,EAAEf,KAAK,CAACG,IAAI,CAACY,WAAW;MACnCC,QAAQ,EAAEhB,KAAK,CAACG,IAAI,CAACa,QAAQ,GAAGhB,KAAK,CAACG,IAAI,CAACa,QAAQ,GAAG,CAAC,CAAC;MACxDC,IAAI,EAAEjB,KAAK,CAACG,IAAI,CAACc,IAAI;MAAY;MACjCC,UAAU,EAAElB,KAAK,CAACG,IAAI,CAACe,UAAU,CAAC;IACpC,CAAC;IACDiB,OAAO,CAACC,GAAG,CAACC,IAAI,CAACC,SAAS,CAACJ,OAAO,CAAC,CAAC;IACpC,OAAOjD,OAAO,CAACiD,OAAO,EAAE,MAAM;MAC5BvC,OAAO,CAACG,IAAI,CAAC;QAAEC,QAAQ,EAAE,GAAG;QAAEwC,IAAI,EAAE;MAAK,CAAC,CAAC;IAC7C,CAAC,CAAC;EACJ,CAAC;EACD,MAAMC,MAAM,GAAI5E,CAAC,IAAK;IACpB,MAAM;MAAEuC;IAAK,CAAC,GAAGH,KAAK;IAEtBG,IAAI,CAACvC,CAAC,CAACkD,EAAE,CAAC,GAAGlD,CAAC,CAAC6E,KAAK;IACpBxC,WAAW,CAAC;MACV,GAAGD,KAAK;MACRG;IACF,CAAC,CAAC;EACJ,CAAC;EAED,MAAMuC,iBAAiB,GAAIC,iBAAiB,IAAK;IAC/C1C,WAAW,CAAC;MAAE,GAAGD,KAAK;MAAEoB,cAAc,EAAEuB;IAAkB,CAAC,CAAC;EAC9D,CAAC;EACD,MAAM;IAAErB;EAAG,CAAC,GAAGtB,KAAK;EAEpB,oBACE,IAAArC,WAAA,CAAAiF,IAAA,EAACpF,OAAA,CAAAqF,aAAa;IAAC3D,KAAK,EAAEA,KAAM;IAAA4D,QAAA,gBAG1B,IAAAnF,WAAA,CAAAoF,GAAA,EAACtF,OAAA,CAAAa,OAAM;MAAC0E,QAAQ,EAAC,QAAQ;MAAAF,QAAA,eACvB,IAAAnF,WAAA,CAAAoF,GAAA,EAACrF,QAAA,CAAAY,OAAO;QAAAwE,QAAA,EAAC;MACL,CACK;IAAC,CACJ,CAAC,eACT,IAAAnF,WAAA,CAAAoF,GAAA,EAACzF,WAAA,CAAAgB,OAAU;MAACqB,OAAO,EAAEA;IAAQ,CAAE,CAAC,eAChC,IAAAhC,WAAA,CAAAoF,GAAA,EAACxF,IAAA,CAAAe,OAAG;MAAC2E,CAAC,EAAE,CAAE;MAAAH,QAAA,eACR,IAAAnF,WAAA,CAAAiF,IAAA,EAACzF,gBAAA,CAAAmB,OAAU;QACTiD,YAAY,EAAEA,YAAa;QAC3BJ,WAAW,EAAEnB,KAAK,CAACmB,WAAY;QAC/B+B,QAAQ,EAAE7B,WAAY;QAAAyB,QAAA,gBACtB,IAAAnF,WAAA,CAAAoF,GAAA,EAACnG,SAAA,CAAA0B,OAAQ;UAACkE,MAAM,EAAEA,MAAO;UAACrC,IAAI,EAAEH,KAAK,CAACG;QAAK,CAAE,CAAC,eAC9C,IAAAxC,WAAA,CAAAoF,GAAA,EAACjG,aAAA,CAAAwB,OAAY;UAACkE,MAAM,EAAEA,MAAO;UAACrC,IAAI,EAAEH,KAAK,CAACG;QAAK,CAAE,CAAC,eAClD,IAAAxC,WAAA,CAAAoF,GAAA,EAAChG,gBAAA,CAAAuB,OAAe;UAACkE,MAAM,EAAEA,MAAO;UAACrC,IAAI,EAAEH,KAAK,CAACG;QAAK,CAAE,CAAC,eACrD,IAAAxC,WAAA,CAAAoF,GAAA,EAAC/F,UAAA,CAAAsB,OAAS;UAACkE,MAAM,EAAEA,MAAO;UAACrC,IAAI,EAAEH,KAAK,CAACG,IAAK;UAACnB,IAAI,EAAEA,IAAK;UAAC0D,iBAAiB,EAAEA;QAAkB,CAAE,CAAC;MAAA,CACvF;IAAC,CACV,CAAC,EAELpB,EAAE,iBAAI,IAAA3D,WAAA,CAAAoF,GAAA,EAAC7F,UAAA,CAAAoB,OAAS;MAACgD,EAAE,EAAEA,EAAG;MAACG,MAAM,EAAEA,MAAO;MAACL,cAAc,EAAEpB,KAAK,CAACoB;IAAe,CAAE,CAAC;EAAA,CACrE,CAAC;AAEpB,CAAC;AAED,MAAM+B,eAAe,GAAGnD,KAAK,KAAK;EAChChB,IAAI,EAAEgB,KAAK,CAAChB,IAAI;EAChBoE,MAAM,EAAEpD,KAAK,CAACoD;AAChB,CAAC,CAAC;AAEFrE,gBAAgB,CAACsE,SAAS,GAAG;EAC3BpE,OAAO,EAAEqE,kBAAS,CAACC,IAAI,CAACC,UAAU;EAClCxE,IAAI,EAAEsE,kBAAS,CAACG,MAAM,CAACD;AACzB,CAAC;AAED,MAAME,kBAAkB,GAAIC,QAAQ,KAAM;EACxC1E,OAAO,EAAEA,CAACkB,IAAI,EAAER,OAAO,KAAK,IAAAV,oBAAO,EAACkB,IAAI,EAAER,OAAO,CAAC,CAACgE,QAAQ;AAC7D,CAAC,CAAC;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAAvF,OAAA,GAEY,IAAAwF,mBAAO,EAACX,eAAe,EAAEO,kBAAkB,CAAC,CAAC3E,gBAAgB,CAAC","ignoreList":[]}