{"version":3,"names":["_react","_interopRequireWildcard","require","_Button","_interopRequireDefault","_axios","_config","_image_placeholder","_browserImageCompression","_jsxRuntime","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","ImageStep","props","state","updateState","useState","placeholder","getImage","files","target","fileObj","console","log","error","path","URL","createObjectURL","JSON","stringify","submitFile","err","event","file","preventDefault","options","maxSizeMB","maxWidthOrHeight","useWebWorker","setUploadingState","imageCompression","then","compressedFile","formData","FormData","append","form","host_id","axios","post","config","SERVER_HOST","headers","response","data","update","catch","finally","jsxs","className","children","jsx","style","marginLeft","backgroundImage","backgroundRepeat","backgroundSize","backgroundPosition","width","height","border","variant","component","type","accept","display","onChange","_default","exports"],"sources":["ImageStep.js"],"sourcesContent":["import React, { useState } from 'react';\nimport Button from '@mui/material/Button';\nimport axios from 'axios';\nimport config from \"../../../config\";\nimport placeholder from \"../../../resources/wizard/image_placeholder.png\";\nimport imageCompression from 'browser-image-compression';\n\nconst ImageStep = (props) => {\n\n  const [state, updateState] = useState({ \"file\": placeholder });\n\n  const getImage = e => {\n    const files = e.target.files;\n    try {\n      const fileObj = files[0];\n      console.log(`Uploading ${fileObj}.`);\n      if (!fileObj) {\n        console.error(`Error uploading ${fileObj}.`);\n      }\n      const path = URL.createObjectURL(fileObj);\n      console.log(`Path: ${JSON.stringify(path)}`);\n\n      updateState({ \"file\": path });\n\n      submitFile(e, fileObj);\n    }\n    catch (err) {\n      console.error(err);\n    }\n  };\n\n  const submitFile = (event, file) => {\n    event.preventDefault();\n\n    var options = {\n      maxSizeMB: 1,\n      maxWidthOrHeight: 1920,\n      useWebWorker: true\n    }\n    props.setUploadingState(true);\n    imageCompression(event.target.files[0], options)\n      .then(function (compressedFile) {\n        const formData = new FormData();\n        formData.append('file', compressedFile);\n        formData.append('uploader', props.form.host_id);\n        axios.post(`${config.SERVER_HOST}/api/images/upload`, formData, {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        })\n          .then(response => {\n            console.log(response.data);\n            props.update({ \"id\": \"image_id\", \"value\": response.data });\n          })\n          .catch(function (error) {\n            console.error(error);\n          })\n          .finally(() => {\n            props.setUploadingState(false);\n          });\n      })\n      .catch(function (error) {\n        console.error(error);\n      });\n  }\n\n  return (\n    <div className=\"wizard-container\">\n\n      <h3 style={{ marginLeft: \"40px\" }}>Image</h3>\n      <div className=\"wizard-image-placeholder-containter\"\n        style={{\n          backgroundImage: `url(${state.file})`,\n          backgroundRepeat: \"no-repeat\",\n          backgroundSize: \"cover\",\n          backgroundPosition: \"center\",\n          width: \"300px\", height: \"300px\",\n          border: \"solid\"\n        }}>\n        <Button\n          variant=\"outlined\"\n          component=\"label\">\n          Add Photo <input\n            type=\"file\" accept=\"image/*\"\n            style={{ display: \"none\" }}\n            onChange={getImage}\n          />\n        </Button>\n      </div>\n    </div>\n  );\n};\n\nexport default ImageStep;"],"mappings":"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","ignoreList":[]}