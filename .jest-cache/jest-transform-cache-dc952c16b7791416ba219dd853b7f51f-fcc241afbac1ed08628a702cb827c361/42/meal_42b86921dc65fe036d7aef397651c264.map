{"version":3,"names":["Validator","require","isEmpty","module","exports","validateMealInput","data","errors","name","description","date","String","location","host_id","lng","lat","address","type","visibility","guest_count","undefined","isNaN","parseInt","console","log","JSON","stringify","isValid","validateMealUpdate"],"sources":["meal.js"],"sourcesContent":["const Validator = require('validator');\nconst isEmpty = require('is-empty');\n\nmodule.exports = function validateMealInput(data) {\n  const errors = {};\n\n  // Convert empty fields to an empty string so we can use validator functions\n  data.name = !isEmpty(data.name) ? data.name : '';\n  data.description = !isEmpty(data.description) ? data.description : '';\n  data.date = !isEmpty(data.date) ? String(data.date) : '';\n  data.location = !isEmpty(data.location) ? data.location : '';\n  data.host_id = !isEmpty(data.host_id) ? String(data.host_id) : '';\n\n  // Name checks\n  if (Validator.isEmpty(data.name)) {\n    errors.name = `Name field is required, \"${data.name}\" is given`;\n  }\n\n  // Description checks\n  if (Validator.isEmpty(data.description)) {\n    errors.description = 'Description field is required';\n  }\n\n  // Date checks\n  if (Validator.isEmpty(data.date)) {\n    errors.date = 'Date field is required';\n  }\n\n  // Location checks - handle both string and object formats\n  if (isEmpty(data.location)) {\n    errors.location = 'Location field is required';\n  } else if (typeof data.location === 'object' && (!data.location.lng || !data.location.lat)) {\n    errors.location = 'Location must have both longitude and latitude';\n  }\n\n  // Host ID checks\n  if (Validator.isEmpty(data.host_id)) {\n    errors.host_id = 'Host ID field is required';\n  }\n\n  // Address is optional for now - can be empty string\n  data.address = !isEmpty(data.address) ? data.address : '';\n\n  // Add missing required fields with defaults\n  data.type = !isEmpty(data.type) ? data.type : 'dinner';\n  data.visibility = !isEmpty(data.visibility) ? data.visibility : 'public';\n\n  // Guest count validation - handle 0 as valid\n  if (data.guest_count === undefined || data.guest_count === null || data.guest_count === '') {\n    errors.guest_count = 'Number of invited guests is empty.';\n  } else if (isNaN(data.guest_count)) {\n    errors.guest_count = `Number of invited guests is not a number, \"${data.guest_count}\" is given`;\n  } else {\n    data.guest_count = parseInt(data.guest_count);\n    if (data.guest_count < 0) {\n      errors.guest_count = 'Number of invited guests should be a positive number';\n    }\n  }\n\n  console.log(`Validate: ${JSON.stringify(errors)}`);\n  return {\n    errors,\n    isValid: isEmpty(errors)\n  };\n};\n\n// Validation function for meal updates (more flexible)\nmodule.exports.validateMealUpdate = function validateMealUpdate(data) {\n  const errors = {};\n\n  // Only validate fields that are present\n  if (data.name !== undefined) {\n    data.name = !isEmpty(data.name) ? data.name : '';\n    if (Validator.isEmpty(data.name)) {\n      errors.name = `Name field is required, \"${data.name}\" is given`;\n    }\n  }\n\n  if (data.description !== undefined) {\n    data.description = !isEmpty(data.description) ? data.description : '';\n    if (Validator.isEmpty(data.description)) {\n      errors.description = 'Description field is required';\n    }\n  }\n\n  if (data.date !== undefined) {\n    data.date = !isEmpty(data.date) ? String(data.date) : '';\n    if (Validator.isEmpty(data.date)) {\n      errors.date = 'Date field is required';\n    }\n  }\n\n  if (data.location !== undefined) {\n    if (isEmpty(data.location)) {\n      errors.location = 'Location field is required';\n    } else if (typeof data.location === 'object' && (!data.location.lng || !data.location.lat)) {\n      errors.location = 'Location must have both longitude and latitude';\n    }\n  }\n\n  if (data.host_id !== undefined) {\n    data.host_id = !isEmpty(data.host_id) ? String(data.host_id) : '';\n    if (Validator.isEmpty(data.host_id)) {\n      errors.host_id = 'Host ID field is required';\n    }\n  }\n\n  if (data.guest_count !== undefined) {\n    if (data.guest_count === undefined || data.guest_count === null || data.guest_count === '') {\n      errors.guest_count = 'Number of invited guests is empty.';\n    } else if (isNaN(data.guest_count)) {\n      errors.guest_count = `Number of invited guests is not a number, \"${data.guest_count}\" is given`;\n    } else {\n      data.guest_count = parseInt(data.guest_count);\n      if (data.guest_count < 0) {\n        errors.guest_count = 'Number of invited guests should be a positive number';\n      }\n    }\n  }\n\n  console.log(`Validate Update: ${JSON.stringify(errors)}`);\n  return {\n    errors,\n    isValid: isEmpty(errors)\n  };\n};\n"],"mappings":"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","ignoreList":[]}