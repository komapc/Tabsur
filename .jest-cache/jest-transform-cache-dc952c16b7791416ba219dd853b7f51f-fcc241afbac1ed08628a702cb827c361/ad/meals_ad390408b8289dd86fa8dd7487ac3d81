7438d2a6ab070e488060a3e1b2ca2937
"use strict";

const pool = require('../db.js');
const {
  authenticateJWT,
  tryAuthenticateJWT
} = require('../authenticateJWT.js');
const addNotification = require('./notificationsPush');
const express = require('express');
const router = express.Router();
// Load input validation;
const validateMealInput = require('../../validation/meal');
// @route GET api/meals/public
// @desc get public meals for unauthenticated users;
// @access Public;
router.get('/public', async (req, response) => {
  console.log('get public meals for unauthenticated users');
  const SQLquery = `
  SELECT 
    m.*, 
    u.name AS host_name, 
    u.id AS host_id,
    0 AS attend_status,
    (SELECT COUNT(user_id) FROM attends WHERE meal_id=m.id AND status>0) AS Atendee_count
  FROM meals AS m 
  JOIN users AS u ON m.host_id = u.id
  WHERE m.date > now()`;
  console.log(`get public meals, SQLquery: [${SQLquery}]`);
  const client = await pool.connect();
  client.query(SQLquery, []).then(resp => {
    response.json(resp.rows);
  }).catch(err => {
    console.error(err);
    response.status(500).json(err);
  }).finally(() => {
    client.release();
  });
});

// @route GET api/meals/:id
// @desc get a meal list for a specific user;
// @access Public;
router.get('/:id', async (req, response) => {
  const userId = req.params.id;
  console.log(`get meals for user ${userId}`);
  if (isNaN(userId)) {
    console.error('Invalid user ID provided');
    return response.status(400).json('Invalid user ID');
  }
  const SQLquery = `
  SELECT
  (SELECT images.path
    FROM meal_images AS mi, images
    WHERE mi.meal_id=m.id and images.id=image_id and images.status>=0 limit 1),
  (((SELECT status AS attend_status FROM attends
     WHERE  meal_id=m.id AND attends.user_id=$1) UNION
    (SELECT 0 AS attend_status) ORDER BY attend_status DESC) LIMIT 1),
    (SELECT count (user_id) AS Atendee_count FROM attends
    WHERE meal_id=m.id AND status>0),
  m.*, u.name AS host_name, u.id AS host_id FROM meals AS m JOIN users AS u ON m.host_id = u.id
  WHERE m.date>now()`;
  console.log(`get meals for user, SQLquery: [${SQLquery}]`);
  const client = await pool.connect();
  client.query(SQLquery, [userId]).then(resp => {
    response.json(resp.rows);
  }).catch(err => {
    console.error(err);
    response.status(500).json(err);
  }).finally(() => {
    client.release();
  });
});
// @route GET api/meals/info/id;
// @desc get info about specific meal;
// @access Public;
router.get('/info/:id/:userId', tryAuthenticateJWT, async (req, response) => {
  const id = req.params.id;
  console.log(`get info params ${JSON.stringify(req.params)}.`);
  const userId = req.params.userId ?? -1;
  console.log(`get info for meal ${id}, user: ${userId}.`);
  if (isNaN(id)) {
    console.error(`Bad meal id: ${id}`);
    return response.status(500).json('Bad meal id');
  }
  const SQLquery = `
  SELECT meals.*, images.path, users.name AS host_name,
  (SELECT status AS attend_status FROM attends
    WHERE  meal_id=$1 AND attends.user_id=$2),
  (SELECT count (user_id) AS Atendee_count FROM attends
      WHERE meal_id=$1 AND status>0)
  FROM meals
  JOIN meal_images ON meal_images.meal_id = meals.id
  JOIN images ON meal_images.image_id = images.id
  JOIN users ON meals.host_id=users.id
  WHERE   meals.id=$1`;
  console.log(`get, SQLquery: [${SQLquery}]`);
  const client = await pool.connect();
  return client.query(SQLquery, [id, userId]).then(resp => {
    console.log(`INFO about ${id}: ${JSON.stringify(resp.rows)}.`);
    return response.json(resp.rows);
  }).catch(err => {
    console.error(err);
    return response.status(500).json(err);
  }).finally(() => {
    client.release();
  });
});
// @route GET api/meals/my;
// @desc get a list of meals created by me;
// @access Public;
router.get('/my/:id', authenticateJWT, async (req, response) => {
  console.log('get my meals by user id: ' + JSON.stringify(req.params));
  const userId = req.params.id;
  if (isNaN(userId)) {
    console.error('error, empty id');
    response.status(400).json('Error in geting my meals: empty');
    return;
  }
  const SQLquery = `SELECT
  (SELECT images.path
    FROM meal_images as mi, images
    WHERE mi.meal_id=m.id and images.id=image_id and images.status>=0 limit 1),
  (SELECT count (user_id) AS Atendee_count FROM attends
    WHERE meal_id=m.id AND status>0),
  0 as attend_status, m.*, u.name  AS host_name FROM meals AS m JOIN users AS u on m.host_id = u.id
  WHERE  host_id=$1`;
  const client = await pool.connect();
  client.query(SQLquery, [userId]).then(resp => {
    return response.json(resp.rows);
  }).catch(err => {
    console.error(err);
    return response.status(500).json(err);
  }).finally(() => {
    client.release();
  });
});
// @route GET api/meals/attends;
// @desc get a list of meals where the user attends;
// @access Public;
router.get('/attends/:id', authenticateJWT, async (req, response) => {
  console.log('get meals where user attends: ' + JSON.stringify(req.params));
  if (isNaN(req.params.id)) {
    console.log('error, empty id');
    response.status(400).json('Error in geting attended meals: empty');
    return;
  }
  const SQLquery = `SELECT * FROM (
  SELECT
  (SELECT images.path
    FROM meal_images as mi, images
    WHERE mi.meal_id=m.id and images.id=image_id and images.status>=0 limit 1),
      (SELECT count (user_id) AS Atendee_count FROM attends WHERE meal_id=m.id AND status>0),
      (SELECT status AS attend_status FROM attends
         WHERE  meal_id=m.id AND attends.user_id=$1),
      m.*, u.name AS host_name, u.id AS host_id FROM meals AS m JOIN users AS u ON m.host_id = u.id
    ) AS sel WHERE attend_status > 0`;
  const client = await pool.connect();
  client.query(SQLquery, [req.params.id]).then(resp => {
    return response.json(resp.rows);
  }).catch(err => {
    console.error(err);
    return response.status(500).json(err);
  }).finally(() => {
    client.release();
  });
});
// @route GET api/meals/guests;
// @desc get a list of users attending a meal;
// @access Public;
router.get('/guests/:meal_id',
//authenticateJWT,  //Paker's request: show guests even when not logged-in;
async (req, response) => {
  console.log(`Get users by meal_id:  ${JSON.stringify(req.params)}`);
  const meal_id = req.params.meal_id;
  if (isNaN(meal_id)) {
    console.error('error, empty id');
    response.status(400).json('Error in getting my meal: empty id');
    return;
  }
  const SQLquery = `SELECT a.user_id, u.name, a.status FROM attends AS a
   INNER JOIN users as u ON a.user_id=u.id WHERE meal_id=$1 AND status>0`;
  console.log(SQLquery);
  const client = await pool.connect();
  client.query(SQLquery, [meal_id]).then(resp => {
    console.error(`Query result: ${JSON.stringify(resp.rows)}`);
    return response.json(resp.rows);
  }).catch(err => {
    console.error(`Failed query: ${err}`);
    return response.status(500).json(err);
  }).finally(() => {
    client.release();
  });
});
// @route POST api/meals/image;
router.post('/image', authenticateJWT, async (req, response) => {
  console.log(`query: ${JSON.stringify(req.body)}`);
  if (!req.body.meal_id) {
    return response.status(500).json(`Empty input.`);
  }
  const meal_id = req.body.meal_id;
  let image_path = req.body.image_path;
  const image_id = req.body.image_id;
  const client = await pool.connect();
  if (isNaN(image_id) || isNaN(meal_id)) {
    return response.status(500).json('Bad params: image_id');
  }
  const query = `INSERT INTO meal_images (meal_id, image_id) VALUES ($1, $2) RETURNING id`;
  client.query(query, [meal_id, image_id]).then(res => {
    console.log(`insert query done: ${JSON.stringify(res.rows)}`);
    image_path = res.rows[0].path;
    return response.status(200).json(res.rows);
  }).catch(err => {
    console.error(err);
    return response.status(500).json('failed to select random image: ' + err);
  }).finally(() => {
    client.release();
  });
});
// @route POST api/meals/ - create a meal;
router.post('/', authenticateJWT, async (req, response) => {
  // Form validation;
  const meal = req.body;
  const {
    errors,
    isValid
  } = validateMealInput(meal);
  // Check validation;
  if (!isValid) {
    return response.status(400).json(errors);
  }
  console.log(`add meal - start, ${JSON.stringify(req.body)}`);
  const client = await pool.connect();
  //todo: insert image;
  const query = `INSERT INTO meals (
  name, type, location, address, guest_count, host_id, date, visibility, description)
  VALUES($1, $2, $3, $4, $5, $6, (to_timestamp($7/ 1000.0)), $8, $9) RETURNING id`;
  console.log(`connected running [${query}]`);
  return client.query(query, [meal.name, meal.type, `(${meal.location.lng}, ${meal.location.lat})`, meal.address, meal.guest_count, meal.host_id, meal.date, meal.visibility, meal.description]).then(res => {
    console.log(`query done.`);
    const message = {
      title: 'New meal',
      body: 'A new meal in your areas',
      icon: 'resources/Message-Bubble-icon.png',
      click_action: '/Meals/',
      sender: -1,
      type: 5
    };
    return response.json(res.rows[0]);
    //TODO: add notification to all followers + people in the area;
  }).catch(e => {
    console.error(`Exception catched in creating meal: ${JSON.stringify(e)}`);
    response.status(500).json(e);
  }).finally(() => {
    client.release();
  });
});
router.put('/', authenticateJWT, async (req, response) => {
  // console.error(`Editing meal is not implemented yet ${JSON.stringify(req.body)}`);
  const meal = req.body;

  // Use the flexible update validation
  const {
    validateMealUpdate
  } = require('../../validation/meal');
  const {
    errors,
    isValid
  } = validateMealUpdate(meal);

  // Check validation;
  if (!isValid) {
    return response.status(400).json(errors);
  }
  const client = await pool.connect();
  //todo: insert image;
  const query = `UPDATE meals
 SET name=$1,  guest_count=$2
 WHERE id=$3`;
  console.log(`connected running [${query}]`);
  return client.query(query, [meal.name, meal.guest_count, meal.id]).then(res => {
    console.log(`query done.`);
    return response.json(res.rows[0]);
    //TODO: add notification to all followers + people in the area;
  }).catch(e => {
    console.error(`Exception catched in creating meal: ${JSON.stringify(e)}`);
    response.status(500).json(e);
  }).finally(() => {
    client.release();
  });
});
// @route DELETE api/meals/id;
// @desc delete a meal;
// @access Public (?);
router.delete('/:meal_id', authenticateJWT, async (req, response) => {
  const meal = req.body;
  const mealId = req.params.meal_id;
  if (isNaN(mealId)) {
    return response.status(400).json(`mealId: wrong meal id format: ${mealId}.`);
  }
  console.log(`delete ${mealId}`);
  const client = await pool.connect();
  client.query('DELETE FROM meals WHERE id=$1', [mealId]).then(() => {
    console.log('deleted.');
    return response.status(201).json(req.body);
  }).catch(e => {
    console.error(`Exception catched: ${JSON.stringfy(e)}`);
    response.status(500).json(e);
  }).finally(() => {
    client.release();
  });
});
module.exports = router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwb29sIiwicmVxdWlyZSIsImF1dGhlbnRpY2F0ZUpXVCIsInRyeUF1dGhlbnRpY2F0ZUpXVCIsImFkZE5vdGlmaWNhdGlvbiIsImV4cHJlc3MiLCJyb3V0ZXIiLCJSb3V0ZXIiLCJ2YWxpZGF0ZU1lYWxJbnB1dCIsImdldCIsInJlcSIsInJlc3BvbnNlIiwiY29uc29sZSIsImxvZyIsIlNRTHF1ZXJ5IiwiY2xpZW50IiwiY29ubmVjdCIsInF1ZXJ5IiwidGhlbiIsInJlc3AiLCJqc29uIiwicm93cyIsImNhdGNoIiwiZXJyIiwiZXJyb3IiLCJzdGF0dXMiLCJmaW5hbGx5IiwicmVsZWFzZSIsInVzZXJJZCIsInBhcmFtcyIsImlkIiwiaXNOYU4iLCJKU09OIiwic3RyaW5naWZ5IiwibWVhbF9pZCIsInBvc3QiLCJib2R5IiwiaW1hZ2VfcGF0aCIsImltYWdlX2lkIiwicmVzIiwicGF0aCIsIm1lYWwiLCJlcnJvcnMiLCJpc1ZhbGlkIiwibmFtZSIsInR5cGUiLCJsb2NhdGlvbiIsImxuZyIsImxhdCIsImFkZHJlc3MiLCJndWVzdF9jb3VudCIsImhvc3RfaWQiLCJkYXRlIiwidmlzaWJpbGl0eSIsImRlc2NyaXB0aW9uIiwibWVzc2FnZSIsInRpdGxlIiwiaWNvbiIsImNsaWNrX2FjdGlvbiIsInNlbmRlciIsImUiLCJwdXQiLCJ2YWxpZGF0ZU1lYWxVcGRhdGUiLCJkZWxldGUiLCJtZWFsSWQiLCJzdHJpbmdmeSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJtZWFscy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBwb29sID0gcmVxdWlyZSgnLi4vZGIuanMnKTtcbmNvbnN0IHsgYXV0aGVudGljYXRlSldULCB0cnlBdXRoZW50aWNhdGVKV1QgfSA9IHJlcXVpcmUoJy4uL2F1dGhlbnRpY2F0ZUpXVC5qcycpO1xuY29uc3QgYWRkTm90aWZpY2F0aW9uID0gcmVxdWlyZSgnLi9ub3RpZmljYXRpb25zUHVzaCcpO1xuY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG4vLyBMb2FkIGlucHV0IHZhbGlkYXRpb247XG5jb25zdCB2YWxpZGF0ZU1lYWxJbnB1dCA9IHJlcXVpcmUoJy4uLy4uL3ZhbGlkYXRpb24vbWVhbCcpO1xuLy8gQHJvdXRlIEdFVCBhcGkvbWVhbHMvcHVibGljXG4vLyBAZGVzYyBnZXQgcHVibGljIG1lYWxzIGZvciB1bmF1dGhlbnRpY2F0ZWQgdXNlcnM7XG4vLyBAYWNjZXNzIFB1YmxpYztcbnJvdXRlci5nZXQoJy9wdWJsaWMnLCBhc3luYyAocmVxLCByZXNwb25zZSkgPT4ge1xuICBjb25zb2xlLmxvZygnZ2V0IHB1YmxpYyBtZWFscyBmb3IgdW5hdXRoZW50aWNhdGVkIHVzZXJzJyk7XG4gIGNvbnN0IFNRTHF1ZXJ5ID0gYFxuICBTRUxFQ1QgXG4gICAgbS4qLCBcbiAgICB1Lm5hbWUgQVMgaG9zdF9uYW1lLCBcbiAgICB1LmlkIEFTIGhvc3RfaWQsXG4gICAgMCBBUyBhdHRlbmRfc3RhdHVzLFxuICAgIChTRUxFQ1QgQ09VTlQodXNlcl9pZCkgRlJPTSBhdHRlbmRzIFdIRVJFIG1lYWxfaWQ9bS5pZCBBTkQgc3RhdHVzPjApIEFTIEF0ZW5kZWVfY291bnRcbiAgRlJPTSBtZWFscyBBUyBtIFxuICBKT0lOIHVzZXJzIEFTIHUgT04gbS5ob3N0X2lkID0gdS5pZFxuICBXSEVSRSBtLmRhdGUgPiBub3coKWA7XG4gIGNvbnNvbGUubG9nKGBnZXQgcHVibGljIG1lYWxzLCBTUUxxdWVyeTogWyR7U1FMcXVlcnl9XWApO1xuICBjb25zdCBjbGllbnQgPSBhd2FpdCBwb29sLmNvbm5lY3QoKTtcbiAgY2xpZW50LnF1ZXJ5KFNRTHF1ZXJ5LCBbXSlcbiAgICAudGhlbihyZXNwID0+IHtcbiAgICAgIHJlc3BvbnNlLmpzb24ocmVzcC5yb3dzKTtcbiAgICB9KVxuICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgcmVzcG9uc2Uuc3RhdHVzKDUwMCkuanNvbihlcnIpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgY2xpZW50LnJlbGVhc2UoKTtcbiAgICB9KTtcbn0pO1xuXG4vLyBAcm91dGUgR0VUIGFwaS9tZWFscy86aWRcbi8vIEBkZXNjIGdldCBhIG1lYWwgbGlzdCBmb3IgYSBzcGVjaWZpYyB1c2VyO1xuLy8gQGFjY2VzcyBQdWJsaWM7XG5yb3V0ZXIuZ2V0KCcvOmlkJywgYXN5bmMgKHJlcSwgcmVzcG9uc2UpID0+IHtcbiAgY29uc3QgdXNlcklkID0gcmVxLnBhcmFtcy5pZDtcbiAgY29uc29sZS5sb2coYGdldCBtZWFscyBmb3IgdXNlciAke3VzZXJJZH1gKTtcbiAgaWYgKGlzTmFOKHVzZXJJZCkpIHtcbiAgICBjb25zb2xlLmVycm9yKCdJbnZhbGlkIHVzZXIgSUQgcHJvdmlkZWQnKTtcbiAgICByZXR1cm4gcmVzcG9uc2Uuc3RhdHVzKDQwMCkuanNvbignSW52YWxpZCB1c2VyIElEJyk7XG4gIH1cbiAgY29uc3QgU1FMcXVlcnkgPSBgXG4gIFNFTEVDVFxuICAoU0VMRUNUIGltYWdlcy5wYXRoXG4gICAgRlJPTSBtZWFsX2ltYWdlcyBBUyBtaSwgaW1hZ2VzXG4gICAgV0hFUkUgbWkubWVhbF9pZD1tLmlkIGFuZCBpbWFnZXMuaWQ9aW1hZ2VfaWQgYW5kIGltYWdlcy5zdGF0dXM+PTAgbGltaXQgMSksXG4gICgoKFNFTEVDVCBzdGF0dXMgQVMgYXR0ZW5kX3N0YXR1cyBGUk9NIGF0dGVuZHNcbiAgICAgV0hFUkUgIG1lYWxfaWQ9bS5pZCBBTkQgYXR0ZW5kcy51c2VyX2lkPSQxKSBVTklPTlxuICAgIChTRUxFQ1QgMCBBUyBhdHRlbmRfc3RhdHVzKSBPUkRFUiBCWSBhdHRlbmRfc3RhdHVzIERFU0MpIExJTUlUIDEpLFxuICAgIChTRUxFQ1QgY291bnQgKHVzZXJfaWQpIEFTIEF0ZW5kZWVfY291bnQgRlJPTSBhdHRlbmRzXG4gICAgV0hFUkUgbWVhbF9pZD1tLmlkIEFORCBzdGF0dXM+MCksXG4gIG0uKiwgdS5uYW1lIEFTIGhvc3RfbmFtZSwgdS5pZCBBUyBob3N0X2lkIEZST00gbWVhbHMgQVMgbSBKT0lOIHVzZXJzIEFTIHUgT04gbS5ob3N0X2lkID0gdS5pZFxuICBXSEVSRSBtLmRhdGU+bm93KClgO1xuICBjb25zb2xlLmxvZyhgZ2V0IG1lYWxzIGZvciB1c2VyLCBTUUxxdWVyeTogWyR7U1FMcXVlcnl9XWApO1xuICBjb25zdCBjbGllbnQgPSBhd2FpdCBwb29sLmNvbm5lY3QoKTtcbiAgY2xpZW50LnF1ZXJ5KFNRTHF1ZXJ5LCBbdXNlcklkXSlcbiAgICAudGhlbihyZXNwID0+IHtcbiAgICAgIHJlc3BvbnNlLmpzb24ocmVzcC5yb3dzKTtcbiAgICB9KVxuICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgcmVzcG9uc2Uuc3RhdHVzKDUwMCkuanNvbihlcnIpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgY2xpZW50LnJlbGVhc2UoKTtcbiAgICB9KTtcbn0pO1xuLy8gQHJvdXRlIEdFVCBhcGkvbWVhbHMvaW5mby9pZDtcbi8vIEBkZXNjIGdldCBpbmZvIGFib3V0IHNwZWNpZmljIG1lYWw7XG4vLyBAYWNjZXNzIFB1YmxpYztcbnJvdXRlci5nZXQoJy9pbmZvLzppZC86dXNlcklkJywgdHJ5QXV0aGVudGljYXRlSldULCBhc3luYyAocmVxLCByZXNwb25zZSkgPT4ge1xuICBjb25zdCBpZCA9IHJlcS5wYXJhbXMuaWQ7XG4gIGNvbnNvbGUubG9nKGBnZXQgaW5mbyBwYXJhbXMgJHtKU09OLnN0cmluZ2lmeShyZXEucGFyYW1zKX0uYCk7XG4gIGNvbnN0IHVzZXJJZCA9IHJlcS5wYXJhbXMudXNlcklkID8/IC0xO1xuICBjb25zb2xlLmxvZyhgZ2V0IGluZm8gZm9yIG1lYWwgJHtpZH0sIHVzZXI6ICR7dXNlcklkfS5gKTtcbiAgaWYgKGlzTmFOKGlkKSkge1xuICAgIGNvbnNvbGUuZXJyb3IoYEJhZCBtZWFsIGlkOiAke2lkfWApO1xuICAgIHJldHVybiByZXNwb25zZS5zdGF0dXMoNTAwKS5qc29uKCdCYWQgbWVhbCBpZCcpO1xuICB9XG4gIGNvbnN0IFNRTHF1ZXJ5ID0gYFxuICBTRUxFQ1QgbWVhbHMuKiwgaW1hZ2VzLnBhdGgsIHVzZXJzLm5hbWUgQVMgaG9zdF9uYW1lLFxuICAoU0VMRUNUIHN0YXR1cyBBUyBhdHRlbmRfc3RhdHVzIEZST00gYXR0ZW5kc1xuICAgIFdIRVJFICBtZWFsX2lkPSQxIEFORCBhdHRlbmRzLnVzZXJfaWQ9JDIpLFxuICAoU0VMRUNUIGNvdW50ICh1c2VyX2lkKSBBUyBBdGVuZGVlX2NvdW50IEZST00gYXR0ZW5kc1xuICAgICAgV0hFUkUgbWVhbF9pZD0kMSBBTkQgc3RhdHVzPjApXG4gIEZST00gbWVhbHNcbiAgSk9JTiBtZWFsX2ltYWdlcyBPTiBtZWFsX2ltYWdlcy5tZWFsX2lkID0gbWVhbHMuaWRcbiAgSk9JTiBpbWFnZXMgT04gbWVhbF9pbWFnZXMuaW1hZ2VfaWQgPSBpbWFnZXMuaWRcbiAgSk9JTiB1c2VycyBPTiBtZWFscy5ob3N0X2lkPXVzZXJzLmlkXG4gIFdIRVJFICAgbWVhbHMuaWQ9JDFgO1xuICBjb25zb2xlLmxvZyhgZ2V0LCBTUUxxdWVyeTogWyR7U1FMcXVlcnl9XWApO1xuICBjb25zdCBjbGllbnQgPSBhd2FpdCBwb29sLmNvbm5lY3QoKTtcbiAgcmV0dXJuIGNsaWVudC5xdWVyeShTUUxxdWVyeSwgW2lkLCB1c2VySWRdKVxuICAgIC50aGVuKHJlc3AgPT4ge1xuICAgICAgY29uc29sZS5sb2coYElORk8gYWJvdXQgJHtpZH06ICR7SlNPTi5zdHJpbmdpZnkocmVzcC5yb3dzKX0uYCk7XG4gICAgICByZXR1cm4gcmVzcG9uc2UuanNvbihyZXNwLnJvd3MpO1xuICAgIH0pXG4gICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICByZXR1cm4gcmVzcG9uc2Uuc3RhdHVzKDUwMCkuanNvbihlcnIpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgY2xpZW50LnJlbGVhc2UoKTtcbiAgICB9KTtcbn0pO1xuLy8gQHJvdXRlIEdFVCBhcGkvbWVhbHMvbXk7XG4vLyBAZGVzYyBnZXQgYSBsaXN0IG9mIG1lYWxzIGNyZWF0ZWQgYnkgbWU7XG4vLyBAYWNjZXNzIFB1YmxpYztcbnJvdXRlci5nZXQoJy9teS86aWQnLCBhdXRoZW50aWNhdGVKV1QsIGFzeW5jIChyZXEsIHJlc3BvbnNlKSA9PiB7XG4gIGNvbnNvbGUubG9nKCdnZXQgbXkgbWVhbHMgYnkgdXNlciBpZDogJyArIEpTT04uc3RyaW5naWZ5KHJlcS5wYXJhbXMpKTtcbiAgY29uc3QgdXNlcklkID0gcmVxLnBhcmFtcy5pZDtcbiAgaWYgKGlzTmFOKHVzZXJJZCkpIHtcbiAgICBjb25zb2xlLmVycm9yKCdlcnJvciwgZW1wdHkgaWQnKTtcbiAgICByZXNwb25zZS5zdGF0dXMoNDAwKS5qc29uKCdFcnJvciBpbiBnZXRpbmcgbXkgbWVhbHM6IGVtcHR5Jyk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IFNRTHF1ZXJ5ID0gYFNFTEVDVFxuICAoU0VMRUNUIGltYWdlcy5wYXRoXG4gICAgRlJPTSBtZWFsX2ltYWdlcyBhcyBtaSwgaW1hZ2VzXG4gICAgV0hFUkUgbWkubWVhbF9pZD1tLmlkIGFuZCBpbWFnZXMuaWQ9aW1hZ2VfaWQgYW5kIGltYWdlcy5zdGF0dXM+PTAgbGltaXQgMSksXG4gIChTRUxFQ1QgY291bnQgKHVzZXJfaWQpIEFTIEF0ZW5kZWVfY291bnQgRlJPTSBhdHRlbmRzXG4gICAgV0hFUkUgbWVhbF9pZD1tLmlkIEFORCBzdGF0dXM+MCksXG4gIDAgYXMgYXR0ZW5kX3N0YXR1cywgbS4qLCB1Lm5hbWUgIEFTIGhvc3RfbmFtZSBGUk9NIG1lYWxzIEFTIG0gSk9JTiB1c2VycyBBUyB1IG9uIG0uaG9zdF9pZCA9IHUuaWRcbiAgV0hFUkUgIGhvc3RfaWQ9JDFgO1xuICBjb25zdCBjbGllbnQgPSBhd2FpdCBwb29sLmNvbm5lY3QoKTtcbiAgY2xpZW50LnF1ZXJ5KFNRTHF1ZXJ5LCBbdXNlcklkXSlcbiAgICAudGhlbihyZXNwID0+IHtcbiAgICAgIHJldHVybiByZXNwb25zZS5qc29uKHJlc3Aucm93cyk7XG4gICAgfSlcbiAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgIHJldHVybiByZXNwb25zZS5zdGF0dXMoNTAwKS5qc29uKGVycik7XG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBjbGllbnQucmVsZWFzZSgpO1xuICAgIH0pO1xufSk7XG4vLyBAcm91dGUgR0VUIGFwaS9tZWFscy9hdHRlbmRzO1xuLy8gQGRlc2MgZ2V0IGEgbGlzdCBvZiBtZWFscyB3aGVyZSB0aGUgdXNlciBhdHRlbmRzO1xuLy8gQGFjY2VzcyBQdWJsaWM7XG5yb3V0ZXIuZ2V0KCcvYXR0ZW5kcy86aWQnLCBhdXRoZW50aWNhdGVKV1QsIGFzeW5jIChyZXEsIHJlc3BvbnNlKSA9PiB7XG4gIGNvbnNvbGUubG9nKCdnZXQgbWVhbHMgd2hlcmUgdXNlciBhdHRlbmRzOiAnICsgSlNPTi5zdHJpbmdpZnkocmVxLnBhcmFtcykpO1xuICBpZiAoaXNOYU4ocmVxLnBhcmFtcy5pZCkpIHtcbiAgICBjb25zb2xlLmxvZygnZXJyb3IsIGVtcHR5IGlkJyk7XG4gICAgcmVzcG9uc2Uuc3RhdHVzKDQwMCkuanNvbignRXJyb3IgaW4gZ2V0aW5nIGF0dGVuZGVkIG1lYWxzOiBlbXB0eScpO1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBTUUxxdWVyeSA9IGBTRUxFQ1QgKiBGUk9NIChcbiAgU0VMRUNUXG4gIChTRUxFQ1QgaW1hZ2VzLnBhdGhcbiAgICBGUk9NIG1lYWxfaW1hZ2VzIGFzIG1pLCBpbWFnZXNcbiAgICBXSEVSRSBtaS5tZWFsX2lkPW0uaWQgYW5kIGltYWdlcy5pZD1pbWFnZV9pZCBhbmQgaW1hZ2VzLnN0YXR1cz49MCBsaW1pdCAxKSxcbiAgICAgIChTRUxFQ1QgY291bnQgKHVzZXJfaWQpIEFTIEF0ZW5kZWVfY291bnQgRlJPTSBhdHRlbmRzIFdIRVJFIG1lYWxfaWQ9bS5pZCBBTkQgc3RhdHVzPjApLFxuICAgICAgKFNFTEVDVCBzdGF0dXMgQVMgYXR0ZW5kX3N0YXR1cyBGUk9NIGF0dGVuZHNcbiAgICAgICAgIFdIRVJFICBtZWFsX2lkPW0uaWQgQU5EIGF0dGVuZHMudXNlcl9pZD0kMSksXG4gICAgICBtLiosIHUubmFtZSBBUyBob3N0X25hbWUsIHUuaWQgQVMgaG9zdF9pZCBGUk9NIG1lYWxzIEFTIG0gSk9JTiB1c2VycyBBUyB1IE9OIG0uaG9zdF9pZCA9IHUuaWRcbiAgICApIEFTIHNlbCBXSEVSRSBhdHRlbmRfc3RhdHVzID4gMGA7XG4gIGNvbnN0IGNsaWVudCA9IGF3YWl0IHBvb2wuY29ubmVjdCgpO1xuICBjbGllbnQucXVlcnkoU1FMcXVlcnksIFtyZXEucGFyYW1zLmlkXSlcbiAgICAudGhlbihyZXNwID0+IHtcbiAgICAgIHJldHVybiByZXNwb25zZS5qc29uKHJlc3Aucm93cyk7XG4gICAgfSlcbiAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgIHJldHVybiByZXNwb25zZS5zdGF0dXMoNTAwKS5qc29uKGVycik7XG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBjbGllbnQucmVsZWFzZSgpO1xuICAgIH0pO1xufSk7XG4vLyBAcm91dGUgR0VUIGFwaS9tZWFscy9ndWVzdHM7XG4vLyBAZGVzYyBnZXQgYSBsaXN0IG9mIHVzZXJzIGF0dGVuZGluZyBhIG1lYWw7XG4vLyBAYWNjZXNzIFB1YmxpYztcbnJvdXRlci5nZXQoJy9ndWVzdHMvOm1lYWxfaWQnLFxuICAvL2F1dGhlbnRpY2F0ZUpXVCwgIC8vUGFrZXIncyByZXF1ZXN0OiBzaG93IGd1ZXN0cyBldmVuIHdoZW4gbm90IGxvZ2dlZC1pbjtcbiAgYXN5bmMgKHJlcSwgcmVzcG9uc2UpID0+IHtcbiAgICBjb25zb2xlLmxvZyhgR2V0IHVzZXJzIGJ5IG1lYWxfaWQ6ICAke0pTT04uc3RyaW5naWZ5KHJlcS5wYXJhbXMpfWApO1xuICAgIGNvbnN0IG1lYWxfaWQgPSByZXEucGFyYW1zLm1lYWxfaWQ7XG4gICAgaWYgKGlzTmFOKG1lYWxfaWQpKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdlcnJvciwgZW1wdHkgaWQnKTtcbiAgICAgIHJlc3BvbnNlLnN0YXR1cyg0MDApLmpzb24oJ0Vycm9yIGluIGdldHRpbmcgbXkgbWVhbDogZW1wdHkgaWQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgU1FMcXVlcnkgPSBgU0VMRUNUIGEudXNlcl9pZCwgdS5uYW1lLCBhLnN0YXR1cyBGUk9NIGF0dGVuZHMgQVMgYVxuICAgSU5ORVIgSk9JTiB1c2VycyBhcyB1IE9OIGEudXNlcl9pZD11LmlkIFdIRVJFIG1lYWxfaWQ9JDEgQU5EIHN0YXR1cz4wYDtcbiAgICBjb25zb2xlLmxvZyhTUUxxdWVyeSk7XG4gICAgY29uc3QgY2xpZW50ID0gYXdhaXQgcG9vbC5jb25uZWN0KCk7XG4gICAgY2xpZW50LnF1ZXJ5KFNRTHF1ZXJ5LCBbbWVhbF9pZF0pXG4gICAgICAudGhlbihyZXNwID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgUXVlcnkgcmVzdWx0OiAke0pTT04uc3RyaW5naWZ5KHJlc3Aucm93cyl9YCk7XG4gICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKHJlc3Aucm93cyk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCBxdWVyeTogJHtlcnJ9YCk7XG4gICAgICAgIHJldHVybiByZXNwb25zZS5zdGF0dXMoNTAwKS5qc29uKGVycik7XG4gICAgICB9KVxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICBjbGllbnQucmVsZWFzZSgpO1xuICAgICAgfSk7XG4gIH0pO1xuLy8gQHJvdXRlIFBPU1QgYXBpL21lYWxzL2ltYWdlO1xucm91dGVyLnBvc3QoJy9pbWFnZScsIGF1dGhlbnRpY2F0ZUpXVCwgYXN5bmMgKHJlcSwgcmVzcG9uc2UpID0+IHtcbiAgY29uc29sZS5sb2coYHF1ZXJ5OiAke0pTT04uc3RyaW5naWZ5KHJlcS5ib2R5KX1gKTtcbiAgaWYgKCFyZXEuYm9keS5tZWFsX2lkKSB7XG4gICAgcmV0dXJuIHJlc3BvbnNlLnN0YXR1cyg1MDApLmpzb24oYEVtcHR5IGlucHV0LmApO1xuICB9XG4gIGNvbnN0IG1lYWxfaWQgPSByZXEuYm9keS5tZWFsX2lkO1xuICBsZXQgaW1hZ2VfcGF0aCA9IHJlcS5ib2R5LmltYWdlX3BhdGg7XG4gIGNvbnN0IGltYWdlX2lkID0gcmVxLmJvZHkuaW1hZ2VfaWQ7XG4gIGNvbnN0IGNsaWVudCA9IGF3YWl0IHBvb2wuY29ubmVjdCgpO1xuICBpZiAoaXNOYU4oaW1hZ2VfaWQpIHx8IGlzTmFOKG1lYWxfaWQpKSB7XG4gICAgcmV0dXJuIHJlc3BvbnNlLnN0YXR1cyg1MDApLmpzb24oJ0JhZCBwYXJhbXM6IGltYWdlX2lkJyk7XG4gIH1cbiAgY29uc3QgcXVlcnkgPSBgSU5TRVJUIElOVE8gbWVhbF9pbWFnZXMgKG1lYWxfaWQsIGltYWdlX2lkKSBWQUxVRVMgKCQxLCAkMikgUkVUVVJOSU5HIGlkYDtcbiAgY2xpZW50LnF1ZXJ5KHF1ZXJ5LCBbbWVhbF9pZCwgaW1hZ2VfaWRdKVxuICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGBpbnNlcnQgcXVlcnkgZG9uZTogJHtKU09OLnN0cmluZ2lmeShyZXMucm93cyl9YCk7XG4gICAgICBpbWFnZV9wYXRoID0gcmVzLnJvd3NbMF0ucGF0aDtcbiAgICAgIHJldHVybiByZXNwb25zZS5zdGF0dXMoMjAwKS5qc29uKHJlcy5yb3dzKTtcbiAgICB9KVxuICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgcmV0dXJuIHJlc3BvbnNlLnN0YXR1cyg1MDApLmpzb24oJ2ZhaWxlZCB0byBzZWxlY3QgcmFuZG9tIGltYWdlOiAnICsgZXJyKTtcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIGNsaWVudC5yZWxlYXNlKCk7XG4gICAgfSk7XG59KTtcbi8vIEByb3V0ZSBQT1NUIGFwaS9tZWFscy8gLSBjcmVhdGUgYSBtZWFsO1xucm91dGVyLnBvc3QoJy8nLCBhdXRoZW50aWNhdGVKV1QsIGFzeW5jIChyZXEsIHJlc3BvbnNlKSA9PiB7XG4gIC8vIEZvcm0gdmFsaWRhdGlvbjtcbiAgY29uc3QgbWVhbCA9IHJlcS5ib2R5O1xuICBjb25zdCB7IGVycm9ycywgaXNWYWxpZCB9ID0gdmFsaWRhdGVNZWFsSW5wdXQobWVhbCk7XG4gIC8vIENoZWNrIHZhbGlkYXRpb247XG4gIGlmICghaXNWYWxpZCkge1xuICAgIHJldHVybiByZXNwb25zZS5zdGF0dXMoNDAwKS5qc29uKGVycm9ycyk7XG4gIH1cbiAgY29uc29sZS5sb2coYGFkZCBtZWFsIC0gc3RhcnQsICR7SlNPTi5zdHJpbmdpZnkocmVxLmJvZHkpfWApO1xuICBjb25zdCBjbGllbnQgPSBhd2FpdCBwb29sLmNvbm5lY3QoKTtcbiAgLy90b2RvOiBpbnNlcnQgaW1hZ2U7XG4gIGNvbnN0IHF1ZXJ5ID0gYElOU0VSVCBJTlRPIG1lYWxzIChcbiAgbmFtZSwgdHlwZSwgbG9jYXRpb24sIGFkZHJlc3MsIGd1ZXN0X2NvdW50LCBob3N0X2lkLCBkYXRlLCB2aXNpYmlsaXR5LCBkZXNjcmlwdGlvbilcbiAgVkFMVUVTKCQxLCAkMiwgJDMsICQ0LCAkNSwgJDYsICh0b190aW1lc3RhbXAoJDcvIDEwMDAuMCkpLCAkOCwgJDkpIFJFVFVSTklORyBpZGA7XG4gIGNvbnNvbGUubG9nKGBjb25uZWN0ZWQgcnVubmluZyBbJHtxdWVyeX1dYCk7XG4gIHJldHVybiBjbGllbnQucXVlcnkocXVlcnksXG4gICAgW21lYWwubmFtZSwgbWVhbC50eXBlLCBgKCR7bWVhbC5sb2NhdGlvbi5sbmd9LCAke21lYWwubG9jYXRpb24ubGF0fSlgLFxuICAgICAgbWVhbC5hZGRyZXNzLCBtZWFsLmd1ZXN0X2NvdW50LCBtZWFsLmhvc3RfaWQsIG1lYWwuZGF0ZSwgbWVhbC52aXNpYmlsaXR5LCBtZWFsLmRlc2NyaXB0aW9uXSlcbiAgICAudGhlbihyZXMgPT4ge1xuICAgICAgY29uc29sZS5sb2coYHF1ZXJ5IGRvbmUuYCk7XG4gICAgICBjb25zdCBtZXNzYWdlID1cbiAgICAgIHtcbiAgICAgICAgdGl0bGU6ICdOZXcgbWVhbCcsXG4gICAgICAgIGJvZHk6ICdBIG5ldyBtZWFsIGluIHlvdXIgYXJlYXMnLFxuICAgICAgICBpY29uOiAncmVzb3VyY2VzL01lc3NhZ2UtQnViYmxlLWljb24ucG5nJyxcbiAgICAgICAgY2xpY2tfYWN0aW9uOiAnL01lYWxzLycsXG4gICAgICAgIHNlbmRlcjogLTEsXG4gICAgICAgIHR5cGU6IDVcbiAgICAgIH07XG4gICAgICByZXR1cm4gcmVzcG9uc2UuanNvbihyZXMucm93c1swXSk7XG4gICAgICAvL1RPRE86IGFkZCBub3RpZmljYXRpb24gdG8gYWxsIGZvbGxvd2VycyArIHBlb3BsZSBpbiB0aGUgYXJlYTtcbiAgICB9KVxuICAgIC5jYXRjaChlID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEV4Y2VwdGlvbiBjYXRjaGVkIGluIGNyZWF0aW5nIG1lYWw6ICR7SlNPTi5zdHJpbmdpZnkoZSl9YCk7XG4gICAgICByZXNwb25zZS5zdGF0dXMoNTAwKS5qc29uKGUpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgY2xpZW50LnJlbGVhc2UoKTtcbiAgICB9KTtcbn0pO1xucm91dGVyLnB1dCgnLycsIGF1dGhlbnRpY2F0ZUpXVCwgYXN5bmMgKHJlcSwgcmVzcG9uc2UpID0+IHtcbiAgLy8gY29uc29sZS5lcnJvcihgRWRpdGluZyBtZWFsIGlzIG5vdCBpbXBsZW1lbnRlZCB5ZXQgJHtKU09OLnN0cmluZ2lmeShyZXEuYm9keSl9YCk7XG4gIGNvbnN0IG1lYWwgPSByZXEuYm9keTtcblxuICAvLyBVc2UgdGhlIGZsZXhpYmxlIHVwZGF0ZSB2YWxpZGF0aW9uXG4gIGNvbnN0IHsgdmFsaWRhdGVNZWFsVXBkYXRlIH0gPSByZXF1aXJlKCcuLi8uLi92YWxpZGF0aW9uL21lYWwnKTtcbiAgY29uc3QgeyBlcnJvcnMsIGlzVmFsaWQgfSA9IHZhbGlkYXRlTWVhbFVwZGF0ZShtZWFsKTtcblxuICAvLyBDaGVjayB2YWxpZGF0aW9uO1xuICBpZiAoIWlzVmFsaWQpIHtcbiAgICByZXR1cm4gcmVzcG9uc2Uuc3RhdHVzKDQwMCkuanNvbihlcnJvcnMpO1xuICB9XG5cbiAgY29uc3QgY2xpZW50ID0gYXdhaXQgcG9vbC5jb25uZWN0KCk7XG4gIC8vdG9kbzogaW5zZXJ0IGltYWdlO1xuICBjb25zdCBxdWVyeSA9IGBVUERBVEUgbWVhbHNcbiBTRVQgbmFtZT0kMSwgIGd1ZXN0X2NvdW50PSQyXG4gV0hFUkUgaWQ9JDNgO1xuICBjb25zb2xlLmxvZyhgY29ubmVjdGVkIHJ1bm5pbmcgWyR7cXVlcnl9XWApO1xuICByZXR1cm4gY2xpZW50LnF1ZXJ5KHF1ZXJ5LFxuICAgIFttZWFsLm5hbWUsIG1lYWwuZ3Vlc3RfY291bnQsIG1lYWwuaWRdKVxuICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhgcXVlcnkgZG9uZS5gKTtcbiAgICAgIHJldHVybiByZXNwb25zZS5qc29uKHJlcy5yb3dzWzBdKTtcbiAgICAgIC8vVE9ETzogYWRkIG5vdGlmaWNhdGlvbiB0byBhbGwgZm9sbG93ZXJzICsgcGVvcGxlIGluIHRoZSBhcmVhO1xuICAgIH0pXG4gICAgLmNhdGNoKGUgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihgRXhjZXB0aW9uIGNhdGNoZWQgaW4gY3JlYXRpbmcgbWVhbDogJHtKU09OLnN0cmluZ2lmeShlKX1gKTtcbiAgICAgIHJlc3BvbnNlLnN0YXR1cyg1MDApLmpzb24oZSk7XG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBjbGllbnQucmVsZWFzZSgpO1xuICAgIH0pO1xufSk7XG4vLyBAcm91dGUgREVMRVRFIGFwaS9tZWFscy9pZDtcbi8vIEBkZXNjIGRlbGV0ZSBhIG1lYWw7XG4vLyBAYWNjZXNzIFB1YmxpYyAoPyk7XG5yb3V0ZXIuZGVsZXRlKCcvOm1lYWxfaWQnLCBhdXRoZW50aWNhdGVKV1QsIGFzeW5jIChyZXEsIHJlc3BvbnNlKSA9PiB7XG4gIGNvbnN0IG1lYWwgPSByZXEuYm9keTtcbiAgY29uc3QgbWVhbElkID0gcmVxLnBhcmFtcy5tZWFsX2lkO1xuICBpZiAoaXNOYU4obWVhbElkKSkge1xuICAgIHJldHVybiByZXNwb25zZS5zdGF0dXMoNDAwKS5qc29uKGBtZWFsSWQ6IHdyb25nIG1lYWwgaWQgZm9ybWF0OiAke21lYWxJZH0uYCk7XG4gIH1cbiAgY29uc29sZS5sb2coYGRlbGV0ZSAke21lYWxJZH1gKTtcbiAgY29uc3QgY2xpZW50ID0gYXdhaXQgcG9vbC5jb25uZWN0KCk7XG4gIGNsaWVudC5xdWVyeSgnREVMRVRFIEZST00gbWVhbHMgV0hFUkUgaWQ9JDEnLFxuICAgIFttZWFsSWRdKVxuICAgIC50aGVuKCgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdkZWxldGVkLicpO1xuICAgICAgcmV0dXJuIHJlc3BvbnNlLnN0YXR1cygyMDEpLmpzb24ocmVxLmJvZHkpO1xuICAgIH0pXG4gICAgLmNhdGNoKGUgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihgRXhjZXB0aW9uIGNhdGNoZWQ6ICR7SlNPTi5zdHJpbmdmeShlKX1gKTtcbiAgICAgIHJlc3BvbnNlLnN0YXR1cyg1MDApLmpzb24oZSk7XG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBjbGllbnQucmVsZWFzZSgpO1xuICAgIH0pO1xufSk7XG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlcjsiXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTUEsSUFBSSxHQUFHQyxPQUFPLENBQUMsVUFBVSxDQUFDO0FBQ2hDLE1BQU07RUFBRUMsZUFBZTtF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