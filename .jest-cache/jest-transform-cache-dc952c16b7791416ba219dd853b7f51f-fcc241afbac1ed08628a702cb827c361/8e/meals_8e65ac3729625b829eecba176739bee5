cd27201478e18c338be5b14f5c5bba59
"use strict";

const pool = require('../db.js');
const {
  authenticateJWT,
  tryAuthenticateJWT
} = require('../authenticateJWT.js');
const addNotification = require('./notificationsPush');
const express = require('express');
const router = express.Router();
// Load input validation;
const validateMealInput = require('../../validation/meal');
// @route GET api/meals/public
// @desc get public meals for unauthenticated users;
// @access Public;
router.get('/public', async (req, response) => {
  console.log('get public meals for unauthenticated users');
  const SQLquery = `
  SELECT 
    m.*, 
    u.name AS host_name, 
    u.id AS host_id,
    0 AS attend_status,
    (SELECT COUNT(user_id) FROM attends WHERE meal_id=m.id AND status>0) AS Atendee_count
  FROM meals AS m 
  JOIN users AS u ON m.host_id = u.id
  WHERE m.date > now()`;
  console.log(`get public meals, SQLquery: [${SQLquery}]`);
  const client = await pool.connect();
  client.query(SQLquery, []).then(resp => {
    response.json(resp.rows);
  }).catch(err => {
    console.error(err);
    response.status(500).json(err);
  }).finally(() => {
    client.release();
  });
});

// @route GET api/meals/:id
// @desc get a meal list for a specific user;
// @access Public;
router.get('/:id', async (req, response) => {
  const userId = req.params.id;
  console.log(`get meals for user ${userId}`);
  if (isNaN(userId)) {
    console.error('Invalid user ID provided');
    return response.status(400).json('Invalid user ID');
  }
  const SQLquery = `
  SELECT
  (SELECT images.path
    FROM meal_images AS mi, images
    WHERE mi.meal_id=m.id and images.id=image_id and images.status>=0 limit 1),
  (((SELECT status AS attend_status FROM attends
     WHERE  meal_id=m.id AND attends.user_id=$1) UNION
    (SELECT 0 AS attend_status) ORDER BY attend_status DESC) LIMIT 1),
    (SELECT count (user_id) AS Atendee_count FROM attends
    WHERE meal_id=m.id AND status>0),
  m.*, u.name AS host_name, u.id AS host_id FROM meals AS m JOIN users AS u ON m.host_id = u.id
  WHERE m.date>now()`;
  console.log(`get meals for user, SQLquery: [${SQLquery}]`);
  const client = await pool.connect();
  client.query(SQLquery, [userId]).then(resp => {
    response.json(resp.rows);
  }).catch(err => {
    console.error(err);
    response.status(500).json(err);
  }).finally(() => {
    client.release();
  });
});
// @route GET api/meals/info/id;
// @desc get info about specific meal;
// @access Public;
router.get('/info/:id/:userId', tryAuthenticateJWT, async (req, response) => {
  const id = req.params.id;
  console.log(`get info params ${JSON.stringify(req.params)}.`);
  const userId = req.params.userId ?? -1;
  console.log(`get info for meal ${id}, user: ${userId}.`);
  if (isNaN(id)) {
    console.error(`Bad meal id: ${id}`);
    return response.status(500).json('Bad meal id');
  }
  const SQLquery = `
  SELECT meals.*, images.path, users.name AS host_name,
  (SELECT status AS attend_status FROM attends
    WHERE  meal_id=$1 AND attends.user_id=$2),
  (SELECT count (user_id) AS Atendee_count FROM attends
      WHERE meal_id=$1 AND status>0)
  FROM meals
  JOIN meal_images ON meal_images.meal_id = meals.id
  JOIN images ON meal_images.image_id = images.id
  JOIN users ON meals.host_id=users.id
  WHERE   meals.id=$1`;
  console.log(`get, SQLquery: [${SQLquery}]`);
  const client = await pool.connect();
  return client.query(SQLquery, [id, userId]).then(resp => {
    console.log(`INFO about ${id}: ${JSON.stringify(resp.rows)}.`);
    return response.json(resp.rows);
  }).catch(err => {
    console.error(err);
    return response.status(500).json(err);
  }).finally(() => {
    client.release();
  });
});
// @route GET api/meals/my;
// @desc get a list of meals created by me;
// @access Public;
router.get('/my/:id', authenticateJWT, async (req, response) => {
  console.log('get my meals by user id: ' + JSON.stringify(req.params));
  const userId = req.params.id;
  if (isNaN(userId)) {
    console.error('error, empty id');
    response.status(400).json('Error in geting my meals: empty');
    return;
  }
  const SQLquery = `SELECT
  (SELECT images.path
    FROM meal_images as mi, images
    WHERE mi.meal_id=m.id and images.id=image_id and images.status>=0 limit 1),
  (SELECT count (user_id) AS Atendee_count FROM attends
    WHERE meal_id=m.id AND status>0),
  0 as attend_status, m.*, u.name  AS host_name FROM meals AS m JOIN users AS u on m.host_id = u.id
  WHERE  host_id=$1`;
  const client = await pool.connect();
  client.query(SQLquery, [userId]).then(resp => {
    return response.json(resp.rows);
  }).catch(err => {
    console.error(err);
    return response.status(500).json(err);
  }).finally(() => {
    client.release();
  });
});
// @route GET api/meals/attends;
// @desc get a list of meals where the user attends;
// @access Public;
router.get('/attends/:id', authenticateJWT, async (req, response) => {
  console.log('get meals where user attends: ' + JSON.stringify(req.params));
  if (isNaN(req.params.id)) {
    console.log('error, empty id');
    response.status(400).json('Error in geting attended meals: empty');
    return;
  }
  const SQLquery = `SELECT * FROM (
  SELECT
  (SELECT images.path
    FROM meal_images as mi, images
    WHERE mi.meal_id=m.id and images.id=image_id and images.status>=0 limit 1),
      (SELECT count (user_id) AS Atendee_count FROM attends WHERE meal_id=m.id AND status>0),
      (SELECT status AS attend_status FROM attends
         WHERE  meal_id=m.id AND attends.user_id=$1),
      m.*, u.name AS host_name, u.id AS host_id FROM meals AS m JOIN users AS u ON m.host_id = u.id
    ) AS sel WHERE attend_status > 0`;
  const client = await pool.connect();
  client.query(SQLquery, [req.params.id]).then(resp => {
    return response.json(resp.rows);
  }).catch(err => {
    console.error(err);
    return response.status(500).json(err);
  }).finally(() => {
    client.release();
  });
});
// @route GET api/meals/guests;
// @desc get a list of users attending a meal;
// @access Public;
router.get('/guests/:meal_id',
//authenticateJWT,  //Paker's request: show guests even when not logged-in;
async (req, response) => {
  console.log(`Get users by meal_id:  ${JSON.stringify(req.params)}`);
  const meal_id = req.params.meal_id;
  if (isNaN(meal_id)) {
    console.error('error, empty id');
    response.status(400).json('Error in getting my meal: empty id');
    return;
  }
  const SQLquery = `SELECT a.user_id, u.name, a.status FROM attends AS a
   INNER JOIN users as u ON a.user_id=u.id WHERE meal_id=$1 AND status>0`;
  console.log(SQLquery);
  const client = await pool.connect();
  client.query(SQLquery, [meal_id]).then(resp => {
    console.error(`Query result: ${JSON.stringify(resp.rows)}`);
    return response.json(resp.rows);
  }).catch(err => {
    console.error(`Failed query: ${err}`);
    return response.status(500).json(err);
  }).finally(() => {
    client.release();
  });
});
// @route POST api/meals/image;
router.post('/image', authenticateJWT, async (req, response) => {
  console.log(`query: ${JSON.stringify(req.body)}`);
  if (!req.body.meal_id) {
    return response.status(500).json(`Empty input.`);
  }
  const meal_id = req.body.meal_id;
  let image_path = req.body.image_path;
  const image_id = req.body.image_id;
  const client = await pool.connect();
  if (isNaN(image_id) || isNaN(meal_id)) {
    return response.status(500).json('Bad params: image_id');
  }
  const query = `INSERT INTO meal_images (meal_id, image_id) VALUES ($1, $2) RETURNING id`;
  client.query(query, [meal_id, image_id]).then(res => {
    console.log(`insert query done: ${JSON.stringify(res.rows)}`);
    image_path = res.rows[0].path;
    return response.status(200).json(res.rows);
  }).catch(err => {
    console.error(err);
    return response.status(500).json('failed to select random image: ' + err);
  }).finally(() => {
    client.release();
  });
});
// @route POST api/meals/ - create a meal;
router.post('/', authenticateJWT, async (req, response) => {
  // Form validation;
  const meal = req.body;
  const {
    errors,
    isValid
  } = validateMealInput(meal);
  // Check validation;
  if (!isValid) {
    return response.status(400).json(errors);
  }
  console.log(`add meal - start, ${JSON.stringify(req.body)}`);
  const client = await pool.connect();
  //todo: insert image;
  const query = `INSERT INTO meals (
  name, type, location, address, guest_count, host_id, date, visibility, description)
  VALUES($1, $2, $3, $4, $5, $6, (to_timestamp($7/ 1000.0)), $8, $9) RETURNING id`;
  console.log(`connected running [${query}]`);
  return client.query(query, [meal.name, meal.type, `(${meal.location.lng}, ${meal.location.lat})`, meal.address, meal.guest_count, meal.host_id, meal.date, meal.visibility, meal.description]).then(res => {
    console.log(`query done.`);
    const message = {
      title: 'New meal',
      body: 'A new meal in your areas',
      icon: 'resources/Message-Bubble-icon.png',
      click_action: '/Meals/',
      sender: -1,
      type: 5
    };
    return response.json(res.rows[0]);
    //TODO: add notification to all followers + people in the area;
  }).catch(e => {
    console.error(`Exception catched in creating meal: ${JSON.stringify(e)}`);
    response.status(500).json(e);
  }).finally(() => {
    client.release();
  });
});
router.put('/', authenticateJWT, async (req, response) => {
  // console.error(`Editing meal is not implemented yet ${JSON.stringify(req.body)}`);
  const meal = req.body;

  // Use the flexible update validation
  const {
    validateMealUpdate
  } = require('../../validation/meal');
  const {
    errors,
    isValid
  } = validateMealUpdate(meal);

  // Check validation;
  if (!isValid) {
    return response.status(400).json(errors);
  }
  const client = await pool.connect();
  //todo: insert image;
  const query = `UPDATE meals
 SET name=$1,  guest_count=$2
 WHERE id=$3`;
  console.log(`connected running [${query}]`);
  return client.query(query, [meal.name, meal.guest_count, meal.id]).then(res => {
    console.log(`query done.`);
    return response.json(res.rows[0]);
    //TODO: add notification to all followers + people in the area;
  }).catch(e => {
    console.error(`Exception catched in creating meal: ${JSON.stringify(e)}`);
    response.status(500).json(e);
  }).finally(() => {
    client.release();
  });
});
// @route DELETE api/meals/id;
// @desc delete a meal;
// @access Public (?);
router.delete('/:meal_id', authenticateJWT, async (req, response) => {
  const meal = req.body;
  const mealId = req.params.meal_id;
  if (isNaN(mealId)) {
    return response.status(400).json(`mealId: wrong meal id format: ${mealId}.`);
  }
  console.log(`delete ${mealId}`);
  const client = await pool.connect();
  client.query('DELETE FROM meals WHERE id=$1', [mealId]).then(() => {
    console.log('deleted.');
    return response.status(201).json(req.body);
  }).catch(e => {
    console.error(`Exception catched: ${JSON.stringfy(e)}`);
    response.status(500).json(e);
  }).finally(() => {
    client.release();
  });
});
module.exports = router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwb29sIiwicmVxdWlyZSIsImF1dGhlbnRpY2F0ZUpXVCIsInRyeUF1dGhlbnRpY2F0ZUpXVCIsImFkZE5vdGlmaWNhdGlvbiIsImV4cHJlc3MiLCJyb3V0ZXIiLCJSb3V0ZXIiLCJ2YWxpZGF0ZU1lYWxJbnB1dCIsImdldCIsInJlcSIsInJlc3BvbnNlIiwiY29uc29sZSIsImxvZyIsIlNRTHF1ZXJ5IiwiY2xpZW50IiwiY29ubmVjdCIsInF1ZXJ5IiwidGhlbiIsInJlc3AiLCJqc29uIiwicm93cyIsImNhdGNoIiwiZXJyIiwiZXJyb3IiLCJzdGF0dXMiLCJmaW5hbGx5IiwicmVsZWFzZSIsInVzZXJJZCIsInBhcmFtcyIsImlkIiwiaXNOYU4iLCJKU09OIiwic3RyaW5naWZ5IiwibWVhbF9pZCIsInBvc3QiLCJib2R5IiwiaW1hZ2VfcGF0aCIsImltYWdlX2lkIiwicmVzIiwicGF0aCIsIm1lYWwiLCJlcnJvcnMiLCJpc1ZhbGlkIiwibmFtZSIsInR5cGUiLCJsb2NhdGlvbiIsImxuZyIsImxhdCIsImFkZHJlc3MiLCJndWVzdF9jb3VudCIsImhvc3RfaWQiLCJkYXRlIiwidmlzaWJpbGl0eSIsImRlc2NyaXB0aW9uIiwibWVzc2FnZSIsInRpdGxlIiwiaWNvbiIsImNsaWNrX2FjdGlvbiIsInNlbmRlciIsImUiLCJwdXQiLCJ2YWxpZGF0ZU1lYWxVcGRhdGUiLCJkZWxldGUiLCJtZWFsSWQiLCJzdHJpbmdmeSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJtZWFscy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBwb29sID0gcmVxdWlyZSgnLi4vZGIuanMnKTtcbmNvbnN0IHsgYXV0aGVudGljYXRlSldULCB0cnlBdXRoZW50aWNhdGVKV1QgfSA9IHJlcXVpcmUoJy4uL2F1dGhlbnRpY2F0ZUpXVC5qcycpO1xuY29uc3QgYWRkTm90aWZpY2F0aW9uID0gcmVxdWlyZSgnLi9ub3RpZmljYXRpb25zUHVzaCcpO1xuY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG4vLyBMb2FkIGlucHV0IHZhbGlkYXRpb247XG5jb25zdCB2YWxpZGF0ZU1lYWxJbnB1dCA9IHJlcXVpcmUoJy4uLy4uL3ZhbGlkYXRpb24vbWVhbCcpO1xuLy8gQHJvdXRlIEdFVCBhcGkvbWVhbHMvcHVibGljXG4vLyBAZGVzYyBnZXQgcHVibGljIG1lYWxzIGZvciB1bmF1dGhlbnRpY2F0ZWQgdXNlcnM7XG4vLyBAYWNjZXNzIFB1YmxpYztcbnJvdXRlci5nZXQoJy9wdWJsaWMnLCBhc3luYyAocmVxLCByZXNwb25zZSkgPT4ge1xuICBjb25zb2xlLmxvZygnZ2V0IHB1YmxpYyBtZWFscyBmb3IgdW5hdXRoZW50aWNhdGVkIHVzZXJzJyk7XG4gIGNvbnN0IFNRTHF1ZXJ5ID0gYFxuICBTRUxFQ1QgXG4gICAgbS4qLCBcbiAgICB1Lm5hbWUgQVMgaG9zdF9uYW1lLCBcbiAgICB1LmlkIEFTIGhvc3RfaWQsXG4gICAgMCBBUyBhdHRlbmRfc3RhdHVzLFxuICAgIChTRUxFQ1QgQ09VTlQodXNlcl9pZCkgRlJPTSBhdHRlbmRzIFdIRVJFIG1lYWxfaWQ9bS5pZCBBTkQgc3RhdHVzPjApIEFTIEF0ZW5kZWVfY291bnRcbiAgRlJPTSBtZWFscyBBUyBtIFxuICBKT0lOIHVzZXJzIEFTIHUgT04gbS5ob3N0X2lkID0gdS5pZFxuICBXSEVSRSBtLmRhdGUgPiBub3coKWA7XG4gIGNvbnNvbGUubG9nKGBnZXQgcHVibGljIG1lYWxzLCBTUUxxdWVyeTogWyR7U1FMcXVlcnl9XWApO1xuICBjb25zdCBjbGllbnQgPSBhd2FpdCBwb29sLmNvbm5lY3QoKTtcbiAgY2xpZW50LnF1ZXJ5KFNRTHF1ZXJ5LCBbXSlcbiAgICAudGhlbihyZXNwID0+IHtcbiAgICAgIHJlc3BvbnNlLmpzb24ocmVzcC5yb3dzKTtcbiAgICB9KVxuICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgcmVzcG9uc2Uuc3RhdHVzKDUwMCkuanNvbihlcnIpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgY2xpZW50LnJlbGVhc2UoKTtcbiAgICB9KTtcbn0pO1xuXG4vLyBAcm91dGUgR0VUIGFwaS9tZWFscy86aWRcbi8vIEBkZXNjIGdldCBhIG1lYWwgbGlzdCBmb3IgYSBzcGVjaWZpYyB1c2VyO1xuLy8gQGFjY2VzcyBQdWJsaWM7XG5yb3V0ZXIuZ2V0KCcvOmlkJywgYXN5bmMgKHJlcSwgcmVzcG9uc2UpID0+IHtcbiAgY29uc3QgdXNlcklkID0gcmVxLnBhcmFtcy5pZDtcbiAgY29uc29sZS5sb2coYGdldCBtZWFscyBmb3IgdXNlciAke3VzZXJJZH1gKTtcbiAgXG4gIGlmIChpc05hTih1c2VySWQpKSB7XG4gICAgY29uc29sZS5lcnJvcignSW52YWxpZCB1c2VyIElEIHByb3ZpZGVkJyk7XG4gICAgcmV0dXJuIHJlc3BvbnNlLnN0YXR1cyg0MDApLmpzb24oJ0ludmFsaWQgdXNlciBJRCcpO1xuICB9XG4gIGNvbnN0IFNRTHF1ZXJ5ID0gYFxuICBTRUxFQ1RcbiAgKFNFTEVDVCBpbWFnZXMucGF0aFxuICAgIEZST00gbWVhbF9pbWFnZXMgQVMgbWksIGltYWdlc1xuICAgIFdIRVJFIG1pLm1lYWxfaWQ9bS5pZCBhbmQgaW1hZ2VzLmlkPWltYWdlX2lkIGFuZCBpbWFnZXMuc3RhdHVzPj0wIGxpbWl0IDEpLFxuICAoKChTRUxFQ1Qgc3RhdHVzIEFTIGF0dGVuZF9zdGF0dXMgRlJPTSBhdHRlbmRzXG4gICAgIFdIRVJFICBtZWFsX2lkPW0uaWQgQU5EIGF0dGVuZHMudXNlcl9pZD0kMSkgVU5JT05cbiAgICAoU0VMRUNUIDAgQVMgYXR0ZW5kX3N0YXR1cykgT1JERVIgQlkgYXR0ZW5kX3N0YXR1cyBERVNDKSBMSU1JVCAxKSxcbiAgICAoU0VMRUNUIGNvdW50ICh1c2VyX2lkKSBBUyBBdGVuZGVlX2NvdW50IEZST00gYXR0ZW5kc1xuICAgIFdIRVJFIG1lYWxfaWQ9bS5pZCBBTkQgc3RhdHVzPjApLFxuICBtLiosIHUubmFtZSBBUyBob3N0X25hbWUsIHUuaWQgQVMgaG9zdF9pZCBGUk9NIG1lYWxzIEFTIG0gSk9JTiB1c2VycyBBUyB1IE9OIG0uaG9zdF9pZCA9IHUuaWRcbiAgV0hFUkUgbS5kYXRlPm5vdygpYDtcbiAgY29uc29sZS5sb2coYGdldCBtZWFscyBmb3IgdXNlciwgU1FMcXVlcnk6IFske1NRTHF1ZXJ5fV1gKTtcbiAgY29uc3QgY2xpZW50ID0gYXdhaXQgcG9vbC5jb25uZWN0KCk7XG4gIGNsaWVudC5xdWVyeShTUUxxdWVyeSwgW3VzZXJJZF0pXG4gICAgLnRoZW4ocmVzcCA9PiB7XG4gICAgICByZXNwb25zZS5qc29uKHJlc3Aucm93cyk7XG4gICAgfSlcbiAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgIHJlc3BvbnNlLnN0YXR1cyg1MDApLmpzb24oZXJyKTtcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIGNsaWVudC5yZWxlYXNlKCk7XG4gICAgfSk7XG59KTtcbi8vIEByb3V0ZSBHRVQgYXBpL21lYWxzL2luZm8vaWQ7XG4vLyBAZGVzYyBnZXQgaW5mbyBhYm91dCBzcGVjaWZpYyBtZWFsO1xuLy8gQGFjY2VzcyBQdWJsaWM7XG5yb3V0ZXIuZ2V0KCcvaW5mby86aWQvOnVzZXJJZCcsIHRyeUF1dGhlbnRpY2F0ZUpXVCwgYXN5bmMgKHJlcSwgcmVzcG9uc2UpID0+IHtcbiAgY29uc3QgaWQgPSByZXEucGFyYW1zLmlkO1xuICBjb25zb2xlLmxvZyhgZ2V0IGluZm8gcGFyYW1zICR7SlNPTi5zdHJpbmdpZnkocmVxLnBhcmFtcyl9LmApO1xuICBjb25zdCB1c2VySWQgPSByZXEucGFyYW1zLnVzZXJJZCA/PyAtMTtcbiAgY29uc29sZS5sb2coYGdldCBpbmZvIGZvciBtZWFsICR7aWR9LCB1c2VyOiAke3VzZXJJZH0uYCk7XG4gIGlmIChpc05hTihpZCkpIHtcbiAgICBjb25zb2xlLmVycm9yKGBCYWQgbWVhbCBpZDogJHtpZH1gKTtcbiAgICByZXR1cm4gcmVzcG9uc2Uuc3RhdHVzKDUwMCkuanNvbignQmFkIG1lYWwgaWQnKTtcbiAgfVxuICBjb25zdCBTUUxxdWVyeSA9IGBcbiAgU0VMRUNUIG1lYWxzLiosIGltYWdlcy5wYXRoLCB1c2Vycy5uYW1lIEFTIGhvc3RfbmFtZSxcbiAgKFNFTEVDVCBzdGF0dXMgQVMgYXR0ZW5kX3N0YXR1cyBGUk9NIGF0dGVuZHNcbiAgICBXSEVSRSAgbWVhbF9pZD0kMSBBTkQgYXR0ZW5kcy51c2VyX2lkPSQyKSxcbiAgKFNFTEVDVCBjb3VudCAodXNlcl9pZCkgQVMgQXRlbmRlZV9jb3VudCBGUk9NIGF0dGVuZHNcbiAgICAgIFdIRVJFIG1lYWxfaWQ9JDEgQU5EIHN0YXR1cz4wKVxuICBGUk9NIG1lYWxzXG4gIEpPSU4gbWVhbF9pbWFnZXMgT04gbWVhbF9pbWFnZXMubWVhbF9pZCA9IG1lYWxzLmlkXG4gIEpPSU4gaW1hZ2VzIE9OIG1lYWxfaW1hZ2VzLmltYWdlX2lkID0gaW1hZ2VzLmlkXG4gIEpPSU4gdXNlcnMgT04gbWVhbHMuaG9zdF9pZD11c2Vycy5pZFxuICBXSEVSRSAgIG1lYWxzLmlkPSQxYDtcbiAgY29uc29sZS5sb2coYGdldCwgU1FMcXVlcnk6IFske1NRTHF1ZXJ5fV1gKTtcbiAgY29uc3QgY2xpZW50ID0gYXdhaXQgcG9vbC5jb25uZWN0KCk7XG4gIHJldHVybiBjbGllbnQucXVlcnkoU1FMcXVlcnksIFtpZCwgdXNlcklkXSlcbiAgICAudGhlbihyZXNwID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGBJTkZPIGFib3V0ICR7aWR9OiAke0pTT04uc3RyaW5naWZ5KHJlc3Aucm93cyl9LmApO1xuICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24ocmVzcC5yb3dzKTtcbiAgICB9KVxuICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgcmV0dXJuIHJlc3BvbnNlLnN0YXR1cyg1MDApLmpzb24oZXJyKTtcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIGNsaWVudC5yZWxlYXNlKCk7XG4gICAgfSk7XG59KTtcbi8vIEByb3V0ZSBHRVQgYXBpL21lYWxzL215O1xuLy8gQGRlc2MgZ2V0IGEgbGlzdCBvZiBtZWFscyBjcmVhdGVkIGJ5IG1lO1xuLy8gQGFjY2VzcyBQdWJsaWM7XG5yb3V0ZXIuZ2V0KCcvbXkvOmlkJywgYXV0aGVudGljYXRlSldULCBhc3luYyAocmVxLCByZXNwb25zZSkgPT4ge1xuICBjb25zb2xlLmxvZygnZ2V0IG15IG1lYWxzIGJ5IHVzZXIgaWQ6ICcgKyBKU09OLnN0cmluZ2lmeShyZXEucGFyYW1zKSk7XG4gIGNvbnN0IHVzZXJJZCA9IHJlcS5wYXJhbXMuaWQ7XG4gIGlmIChpc05hTih1c2VySWQpKSB7XG4gICAgY29uc29sZS5lcnJvcignZXJyb3IsIGVtcHR5IGlkJyk7XG4gICAgcmVzcG9uc2Uuc3RhdHVzKDQwMCkuanNvbignRXJyb3IgaW4gZ2V0aW5nIG15IG1lYWxzOiBlbXB0eScpO1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBTUUxxdWVyeSA9IGBTRUxFQ1RcbiAgKFNFTEVDVCBpbWFnZXMucGF0aFxuICAgIEZST00gbWVhbF9pbWFnZXMgYXMgbWksIGltYWdlc1xuICAgIFdIRVJFIG1pLm1lYWxfaWQ9bS5pZCBhbmQgaW1hZ2VzLmlkPWltYWdlX2lkIGFuZCBpbWFnZXMuc3RhdHVzPj0wIGxpbWl0IDEpLFxuICAoU0VMRUNUIGNvdW50ICh1c2VyX2lkKSBBUyBBdGVuZGVlX2NvdW50IEZST00gYXR0ZW5kc1xuICAgIFdIRVJFIG1lYWxfaWQ9bS5pZCBBTkQgc3RhdHVzPjApLFxuICAwIGFzIGF0dGVuZF9zdGF0dXMsIG0uKiwgdS5uYW1lICBBUyBob3N0X25hbWUgRlJPTSBtZWFscyBBUyBtIEpPSU4gdXNlcnMgQVMgdSBvbiBtLmhvc3RfaWQgPSB1LmlkXG4gIFdIRVJFICBob3N0X2lkPSQxYDtcbiAgY29uc3QgY2xpZW50ID0gYXdhaXQgcG9vbC5jb25uZWN0KCk7XG4gIGNsaWVudC5xdWVyeShTUUxxdWVyeSwgW3VzZXJJZF0pXG4gICAgLnRoZW4ocmVzcCA9PiB7XG4gICAgICByZXR1cm4gcmVzcG9uc2UuanNvbihyZXNwLnJvd3MpO1xuICAgIH0pXG4gICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICByZXR1cm4gcmVzcG9uc2Uuc3RhdHVzKDUwMCkuanNvbihlcnIpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgY2xpZW50LnJlbGVhc2UoKTtcbiAgICB9KTtcbn0pO1xuLy8gQHJvdXRlIEdFVCBhcGkvbWVhbHMvYXR0ZW5kcztcbi8vIEBkZXNjIGdldCBhIGxpc3Qgb2YgbWVhbHMgd2hlcmUgdGhlIHVzZXIgYXR0ZW5kcztcbi8vIEBhY2Nlc3MgUHVibGljO1xucm91dGVyLmdldCgnL2F0dGVuZHMvOmlkJywgYXV0aGVudGljYXRlSldULCBhc3luYyAocmVxLCByZXNwb25zZSkgPT4ge1xuICBjb25zb2xlLmxvZygnZ2V0IG1lYWxzIHdoZXJlIHVzZXIgYXR0ZW5kczogJyArIEpTT04uc3RyaW5naWZ5KHJlcS5wYXJhbXMpKTtcbiAgaWYgKGlzTmFOKHJlcS5wYXJhbXMuaWQpKSB7XG4gICAgY29uc29sZS5sb2coJ2Vycm9yLCBlbXB0eSBpZCcpO1xuICAgIHJlc3BvbnNlLnN0YXR1cyg0MDApLmpzb24oJ0Vycm9yIGluIGdldGluZyBhdHRlbmRlZCBtZWFsczogZW1wdHknKTtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgU1FMcXVlcnkgPSBgU0VMRUNUICogRlJPTSAoXG4gIFNFTEVDVFxuICAoU0VMRUNUIGltYWdlcy5wYXRoXG4gICAgRlJPTSBtZWFsX2ltYWdlcyBhcyBtaSwgaW1hZ2VzXG4gICAgV0hFUkUgbWkubWVhbF9pZD1tLmlkIGFuZCBpbWFnZXMuaWQ9aW1hZ2VfaWQgYW5kIGltYWdlcy5zdGF0dXM+PTAgbGltaXQgMSksXG4gICAgICAoU0VMRUNUIGNvdW50ICh1c2VyX2lkKSBBUyBBdGVuZGVlX2NvdW50IEZST00gYXR0ZW5kcyBXSEVSRSBtZWFsX2lkPW0uaWQgQU5EIHN0YXR1cz4wKSxcbiAgICAgIChTRUxFQ1Qgc3RhdHVzIEFTIGF0dGVuZF9zdGF0dXMgRlJPTSBhdHRlbmRzXG4gICAgICAgICBXSEVSRSAgbWVhbF9pZD1tLmlkIEFORCBhdHRlbmRzLnVzZXJfaWQ9JDEpLFxuICAgICAgbS4qLCB1Lm5hbWUgQVMgaG9zdF9uYW1lLCB1LmlkIEFTIGhvc3RfaWQgRlJPTSBtZWFscyBBUyBtIEpPSU4gdXNlcnMgQVMgdSBPTiBtLmhvc3RfaWQgPSB1LmlkXG4gICAgKSBBUyBzZWwgV0hFUkUgYXR0ZW5kX3N0YXR1cyA+IDBgO1xuICBjb25zdCBjbGllbnQgPSBhd2FpdCBwb29sLmNvbm5lY3QoKTtcbiAgY2xpZW50LnF1ZXJ5KFNRTHF1ZXJ5LCBbcmVxLnBhcmFtcy5pZF0pXG4gICAgLnRoZW4ocmVzcCA9PiB7XG4gICAgICByZXR1cm4gcmVzcG9uc2UuanNvbihyZXNwLnJvd3MpO1xuICAgIH0pXG4gICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICByZXR1cm4gcmVzcG9uc2Uuc3RhdHVzKDUwMCkuanNvbihlcnIpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgY2xpZW50LnJlbGVhc2UoKTtcbiAgICB9KTtcbn0pO1xuLy8gQHJvdXRlIEdFVCBhcGkvbWVhbHMvZ3Vlc3RzO1xuLy8gQGRlc2MgZ2V0IGEgbGlzdCBvZiB1c2VycyBhdHRlbmRpbmcgYSBtZWFsO1xuLy8gQGFjY2VzcyBQdWJsaWM7XG5yb3V0ZXIuZ2V0KCcvZ3Vlc3RzLzptZWFsX2lkJyxcbiAgLy9hdXRoZW50aWNhdGVKV1QsICAvL1Bha2VyJ3MgcmVxdWVzdDogc2hvdyBndWVzdHMgZXZlbiB3aGVuIG5vdCBsb2dnZWQtaW47XG4gIGFzeW5jIChyZXEsIHJlc3BvbnNlKSA9PiB7XG4gICAgY29uc29sZS5sb2coYEdldCB1c2VycyBieSBtZWFsX2lkOiAgJHtKU09OLnN0cmluZ2lmeShyZXEucGFyYW1zKX1gKTtcbiAgICBjb25zdCBtZWFsX2lkID0gcmVxLnBhcmFtcy5tZWFsX2lkO1xuICAgIGlmIChpc05hTihtZWFsX2lkKSkge1xuICAgICAgY29uc29sZS5lcnJvcignZXJyb3IsIGVtcHR5IGlkJyk7XG4gICAgICByZXNwb25zZS5zdGF0dXMoNDAwKS5qc29uKCdFcnJvciBpbiBnZXR0aW5nIG15IG1lYWw6IGVtcHR5IGlkJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IFNRTHF1ZXJ5ID0gYFNFTEVDVCBhLnVzZXJfaWQsIHUubmFtZSwgYS5zdGF0dXMgRlJPTSBhdHRlbmRzIEFTIGFcbiAgIElOTkVSIEpPSU4gdXNlcnMgYXMgdSBPTiBhLnVzZXJfaWQ9dS5pZCBXSEVSRSBtZWFsX2lkPSQxIEFORCBzdGF0dXM+MGA7XG4gICAgY29uc29sZS5sb2coU1FMcXVlcnkpO1xuICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IHBvb2wuY29ubmVjdCgpO1xuICAgIGNsaWVudC5xdWVyeShTUUxxdWVyeSwgW21lYWxfaWRdKVxuICAgICAgLnRoZW4ocmVzcCA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYFF1ZXJ5IHJlc3VsdDogJHtKU09OLnN0cmluZ2lmeShyZXNwLnJvd3MpfWApO1xuICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbihyZXNwLnJvd3MpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgcXVlcnk6ICR7ZXJyfWApO1xuICAgICAgICByZXR1cm4gcmVzcG9uc2Uuc3RhdHVzKDUwMCkuanNvbihlcnIpO1xuICAgICAgfSlcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgY2xpZW50LnJlbGVhc2UoKTtcbiAgICAgIH0pO1xuICB9KTtcbi8vIEByb3V0ZSBQT1NUIGFwaS9tZWFscy9pbWFnZTtcbnJvdXRlci5wb3N0KCcvaW1hZ2UnLCBhdXRoZW50aWNhdGVKV1QsIGFzeW5jIChyZXEsIHJlc3BvbnNlKSA9PiB7XG4gIGNvbnNvbGUubG9nKGBxdWVyeTogJHtKU09OLnN0cmluZ2lmeShyZXEuYm9keSl9YCk7XG4gIGlmICghcmVxLmJvZHkubWVhbF9pZCkge1xuICAgIHJldHVybiByZXNwb25zZS5zdGF0dXMoNTAwKS5qc29uKGBFbXB0eSBpbnB1dC5gKTtcbiAgfVxuICBjb25zdCBtZWFsX2lkID0gcmVxLmJvZHkubWVhbF9pZDtcbiAgbGV0IGltYWdlX3BhdGggPSByZXEuYm9keS5pbWFnZV9wYXRoO1xuICBjb25zdCBpbWFnZV9pZCA9IHJlcS5ib2R5LmltYWdlX2lkO1xuICBjb25zdCBjbGllbnQgPSBhd2FpdCBwb29sLmNvbm5lY3QoKTtcbiAgaWYgKGlzTmFOKGltYWdlX2lkKSB8fCBpc05hTihtZWFsX2lkKSkge1xuICAgIHJldHVybiByZXNwb25zZS5zdGF0dXMoNTAwKS5qc29uKCdCYWQgcGFyYW1zOiBpbWFnZV9pZCcpO1xuICB9XG4gIGNvbnN0IHF1ZXJ5ID0gYElOU0VSVCBJTlRPIG1lYWxfaW1hZ2VzIChtZWFsX2lkLCBpbWFnZV9pZCkgVkFMVUVTICgkMSwgJDIpIFJFVFVSTklORyBpZGA7XG4gIGNsaWVudC5xdWVyeShxdWVyeSwgW21lYWxfaWQsIGltYWdlX2lkXSlcbiAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhgaW5zZXJ0IHF1ZXJ5IGRvbmU6ICR7SlNPTi5zdHJpbmdpZnkocmVzLnJvd3MpfWApO1xuICAgICAgaW1hZ2VfcGF0aCA9IHJlcy5yb3dzWzBdLnBhdGg7XG4gICAgICByZXR1cm4gcmVzcG9uc2Uuc3RhdHVzKDIwMCkuanNvbihyZXMucm93cyk7XG4gICAgfSlcbiAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgIHJldHVybiByZXNwb25zZS5zdGF0dXMoNTAwKS5qc29uKCdmYWlsZWQgdG8gc2VsZWN0IHJhbmRvbSBpbWFnZTogJyArIGVycik7XG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBjbGllbnQucmVsZWFzZSgpO1xuICAgIH0pO1xufSk7XG4vLyBAcm91dGUgUE9TVCBhcGkvbWVhbHMvIC0gY3JlYXRlIGEgbWVhbDtcbnJvdXRlci5wb3N0KCcvJywgYXV0aGVudGljYXRlSldULCBhc3luYyAocmVxLCByZXNwb25zZSkgPT4ge1xuICAvLyBGb3JtIHZhbGlkYXRpb247XG4gIGNvbnN0IG1lYWwgPSByZXEuYm9keTtcbiAgY29uc3QgeyBlcnJvcnMsIGlzVmFsaWQgfSA9IHZhbGlkYXRlTWVhbElucHV0KG1lYWwpO1xuICAvLyBDaGVjayB2YWxpZGF0aW9uO1xuICBpZiAoIWlzVmFsaWQpIHtcbiAgICByZXR1cm4gcmVzcG9uc2Uuc3RhdHVzKDQwMCkuanNvbihlcnJvcnMpO1xuICB9XG4gIGNvbnNvbGUubG9nKGBhZGQgbWVhbCAtIHN0YXJ0LCAke0pTT04uc3RyaW5naWZ5KHJlcS5ib2R5KX1gKTtcbiAgY29uc3QgY2xpZW50ID0gYXdhaXQgcG9vbC5jb25uZWN0KCk7XG4gIC8vdG9kbzogaW5zZXJ0IGltYWdlO1xuICBjb25zdCBxdWVyeSA9IGBJTlNFUlQgSU5UTyBtZWFscyAoXG4gIG5hbWUsIHR5cGUsIGxvY2F0aW9uLCBhZGRyZXNzLCBndWVzdF9jb3VudCwgaG9zdF9pZCwgZGF0ZSwgdmlzaWJpbGl0eSwgZGVzY3JpcHRpb24pXG4gIFZBTFVFUygkMSwgJDIsICQzLCAkNCwgJDUsICQ2LCAodG9fdGltZXN0YW1wKCQ3LyAxMDAwLjApKSwgJDgsICQ5KSBSRVRVUk5JTkcgaWRgO1xuICBjb25zb2xlLmxvZyhgY29ubmVjdGVkIHJ1bm5pbmcgWyR7cXVlcnl9XWApO1xuICByZXR1cm4gY2xpZW50LnF1ZXJ5KHF1ZXJ5LFxuICAgIFttZWFsLm5hbWUsIG1lYWwudHlwZSwgYCgke21lYWwubG9jYXRpb24ubG5nfSwgJHttZWFsLmxvY2F0aW9uLmxhdH0pYCxcbiAgICAgIG1lYWwuYWRkcmVzcywgbWVhbC5ndWVzdF9jb3VudCwgbWVhbC5ob3N0X2lkLCBtZWFsLmRhdGUsIG1lYWwudmlzaWJpbGl0eSwgbWVhbC5kZXNjcmlwdGlvbl0pXG4gICAgLnRoZW4ocmVzID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGBxdWVyeSBkb25lLmApO1xuICAgICAgY29uc3QgbWVzc2FnZSA9XG4gICAgICB7XG4gICAgICAgIHRpdGxlOiAnTmV3IG1lYWwnLFxuICAgICAgICBib2R5OiAnQSBuZXcgbWVhbCBpbiB5b3VyIGFyZWFzJyxcbiAgICAgICAgaWNvbjogJ3Jlc291cmNlcy9NZXNzYWdlLUJ1YmJsZS1pY29uLnBuZycsXG4gICAgICAgIGNsaWNrX2FjdGlvbjogJy9NZWFscy8nLFxuICAgICAgICBzZW5kZXI6IC0xLFxuICAgICAgICB0eXBlOiA1XG4gICAgICB9O1xuICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24ocmVzLnJvd3NbMF0pO1xuICAgICAgLy9UT0RPOiBhZGQgbm90aWZpY2F0aW9uIHRvIGFsbCBmb2xsb3dlcnMgKyBwZW9wbGUgaW4gdGhlIGFyZWE7XG4gICAgfSlcbiAgICAuY2F0Y2goZSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGBFeGNlcHRpb24gY2F0Y2hlZCBpbiBjcmVhdGluZyBtZWFsOiAke0pTT04uc3RyaW5naWZ5KGUpfWApO1xuICAgICAgcmVzcG9uc2Uuc3RhdHVzKDUwMCkuanNvbihlKTtcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIGNsaWVudC5yZWxlYXNlKCk7XG4gICAgfSk7XG59KTtcbnJvdXRlci5wdXQoJy8nLCBhdXRoZW50aWNhdGVKV1QsIGFzeW5jIChyZXEsIHJlc3BvbnNlKSA9PiB7XG4gIC8vIGNvbnNvbGUuZXJyb3IoYEVkaXRpbmcgbWVhbCBpcyBub3QgaW1wbGVtZW50ZWQgeWV0ICR7SlNPTi5zdHJpbmdpZnkocmVxLmJvZHkpfWApO1xuICBjb25zdCBtZWFsID0gcmVxLmJvZHk7XG5cbiAgLy8gVXNlIHRoZSBmbGV4aWJsZSB1cGRhdGUgdmFsaWRhdGlvblxuICBjb25zdCB7IHZhbGlkYXRlTWVhbFVwZGF0ZSB9ID0gcmVxdWlyZSgnLi4vLi4vdmFsaWRhdGlvbi9tZWFsJyk7XG4gIGNvbnN0IHsgZXJyb3JzLCBpc1ZhbGlkIH0gPSB2YWxpZGF0ZU1lYWxVcGRhdGUobWVhbCk7XG5cbiAgLy8gQ2hlY2sgdmFsaWRhdGlvbjtcbiAgaWYgKCFpc1ZhbGlkKSB7XG4gICAgcmV0dXJuIHJlc3BvbnNlLnN0YXR1cyg0MDApLmpzb24oZXJyb3JzKTtcbiAgfVxuXG4gIGNvbnN0IGNsaWVudCA9IGF3YWl0IHBvb2wuY29ubmVjdCgpO1xuICAvL3RvZG86IGluc2VydCBpbWFnZTtcbiAgY29uc3QgcXVlcnkgPSBgVVBEQVRFIG1lYWxzXG4gU0VUIG5hbWU9JDEsICBndWVzdF9jb3VudD0kMlxuIFdIRVJFIGlkPSQzYDtcbiAgY29uc29sZS5sb2coYGNvbm5lY3RlZCBydW5uaW5nIFske3F1ZXJ5fV1gKTtcbiAgcmV0dXJuIGNsaWVudC5xdWVyeShxdWVyeSxcbiAgICBbbWVhbC5uYW1lLCBtZWFsLmd1ZXN0X2NvdW50LCBtZWFsLmlkXSlcbiAgICAudGhlbihyZXMgPT4ge1xuICAgICAgY29uc29sZS5sb2coYHF1ZXJ5IGRvbmUuYCk7XG4gICAgICByZXR1cm4gcmVzcG9uc2UuanNvbihyZXMucm93c1swXSk7XG4gICAgICAvL1RPRE86IGFkZCBub3RpZmljYXRpb24gdG8gYWxsIGZvbGxvd2VycyArIHBlb3BsZSBpbiB0aGUgYXJlYTtcbiAgICB9KVxuICAgIC5jYXRjaChlID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEV4Y2VwdGlvbiBjYXRjaGVkIGluIGNyZWF0aW5nIG1lYWw6ICR7SlNPTi5zdHJpbmdpZnkoZSl9YCk7XG4gICAgICByZXNwb25zZS5zdGF0dXMoNTAwKS5qc29uKGUpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgY2xpZW50LnJlbGVhc2UoKTtcbiAgICB9KTtcbn0pO1xuLy8gQHJvdXRlIERFTEVURSBhcGkvbWVhbHMvaWQ7XG4vLyBAZGVzYyBkZWxldGUgYSBtZWFsO1xuLy8gQGFjY2VzcyBQdWJsaWMgKD8pO1xucm91dGVyLmRlbGV0ZSgnLzptZWFsX2lkJywgYXV0aGVudGljYXRlSldULCBhc3luYyAocmVxLCByZXNwb25zZSkgPT4ge1xuICBjb25zdCBtZWFsID0gcmVxLmJvZHk7XG4gIGNvbnN0IG1lYWxJZCA9IHJlcS5wYXJhbXMubWVhbF9pZDtcbiAgaWYgKGlzTmFOKG1lYWxJZCkpIHtcbiAgICByZXR1cm4gcmVzcG9uc2Uuc3RhdHVzKDQwMCkuanNvbihgbWVhbElkOiB3cm9uZyBtZWFsIGlkIGZvcm1hdDogJHttZWFsSWR9LmApO1xuICB9XG4gIGNvbnNvbGUubG9nKGBkZWxldGUgJHttZWFsSWR9YCk7XG4gIGNvbnN0IGNsaWVudCA9IGF3YWl0IHBvb2wuY29ubmVjdCgpO1xuICBjbGllbnQucXVlcnkoJ0RFTEVURSBGUk9NIG1lYWxzIFdIRVJFIGlkPSQxJyxcbiAgICBbbWVhbElkXSlcbiAgICAudGhlbigoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnZGVsZXRlZC4nKTtcbiAgICAgIHJldHVybiByZXNwb25zZS5zdGF0dXMoMjAxKS5qc29uKHJlcS5ib2R5KTtcbiAgICB9KVxuICAgIC5jYXRjaChlID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEV4Y2VwdGlvbiBjYXRjaGVkOiAke0pTT04uc3RyaW5nZnkoZSl9YCk7XG4gICAgICByZXNwb25zZS5zdGF0dXMoNTAwKS5qc29uKGUpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgY2xpZW50LnJlbGVhc2UoKTtcbiAgICB9KTtcbn0pO1xubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7Il0sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU1BLElBQUksR0FBR0MsT0FBTyxDQUFDLFVBQVUsQ0FBQztBQUNoQyxNQUFNO0VBQUVDLGVB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